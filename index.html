<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- AGGRESSIVE CACHE BUSTING META TAGS - Force fresh content -->
    <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate, max-age=0" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta name="cache-buster" content="v20250830-revolutionising" />
    <meta name="deployment-id" content="cache-clear-all" />
    
    <link rel="icon" type="image/svg+xml" href="/favicon.ico?v=20250830-rev" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Transform your RV with cutting-edge smart systems, connectivity solutions, and intelligent automation. Discover the future of mobile living." />
    <meta name="keywords" content="smart rv, rv technology, rv systems, mobile living, rv connectivity" />
    <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />
    <title>Smart RV Hub - The Future of Smart RV Travel</title>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://smartrvhub.com/" />
    
    <!-- Open Graph tags -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://smartrvhub.com/" />
    <meta property="og:title" content="Smart RV Hub - The Future of Smart RV Travel" />
    <meta property="og:description" content="Transform your RV with cutting-edge smart systems, connectivity solutions, and intelligent automation. Discover the future of mobile living." />
    <meta property="og:image" content="https://smartrvhub.com/lovable-uploads/f3ebf58c-7bbf-427f-9510-9c3b0aec6f6d.png" />
    <meta property="og:site_name" content="Smart RV Hub" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter Card tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://smartrvhub.com/" />
    <meta name="twitter:title" content="Smart RV Hub - The Future of Smart RV Travel" />
    <meta name="twitter:description" content="Transform your RV with cutting-edge smart systems, connectivity solutions, and intelligent automation. Discover the future of mobile living." />
    <meta name="twitter:image" content="https://smartrvhub.com/lovable-uploads/f3ebf58c-7bbf-427f-9510-9c3b0aec6f6d.png" />
    
    <!-- Mapbox CSS for proper map styling -->
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css' rel='stylesheet' />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx?v=20250830-revolutionising&cb=" + Date.now()></script>
    
    <!-- Force cache busting with timestamp -->
    <script>
      console.log('%cðŸŽ¯ HTML INDEX UPDATED ðŸŽ¯', 
        'background: linear-gradient(45deg, #ff9a9e, #fecfef); color: black; font-size: 22px; padding: 12px; font-weight: bold;'
      );
      console.log('HTML loaded at:', new Date().toISOString());
      console.log('Cache buster:', Date.now());
      
      // Add cache-busting meta tag
      const meta = document.createElement('meta');
      meta.name = 'cache-buster';
      meta.content = Date.now().toString();
      document.head.appendChild(meta);
    </script>
    
    <!-- AGGRESSIVE Cache Clearing and Version Management -->
    <script>
      const CURRENT_VERSION = 'map-fixes-20250831';
      const FORCE_CLEAR_KEY = 'force-clear-v' + CURRENT_VERSION;
      
      // Clear everything immediately
      function clearAllStorage() {
        try {
          // Clear all caches
          if ('caches' in window) {
            caches.keys().then(function(names) {
              names.forEach(function(name) {
                caches.delete(name);
                console.log('Cleared cache:', name);
              });
            });
          }
          
          // Clear storage
          if (localStorage) {
            const keys = Object.keys(localStorage);
            keys.forEach(key => {
              if (!key.startsWith('keep-')) localStorage.removeItem(key);
            });
          }
          if (sessionStorage) sessionStorage.clear();
          
          // Set force clear marker
          localStorage.setItem(FORCE_CLEAR_KEY, 'cleared');
          
        } catch (e) {
          console.log('Cache clearing error:', e);
        }
      }
      
      // Check if we need to force reload
      function checkVersion() {
        const lastVersion = localStorage.getItem('app-version');
        if (lastVersion && lastVersion !== CURRENT_VERSION) {
          console.log('Version change detected, clearing all caches');
          clearAllStorage();
          localStorage.setItem('app-version', CURRENT_VERSION);
          window.location.reload(true);
          return;
        }
        localStorage.setItem('app-version', CURRENT_VERSION);
      }
      
      // Execute immediately
      clearAllStorage();
      checkVersion();
      
      // Register aggressive cache-clearing service worker
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
          registrations.forEach(function(registration) {
            registration.unregister();
          });
        }).then(function() {
          navigator.serviceWorker.register('/sw.js?v=' + CURRENT_VERSION + '&cb=' + Date.now())
            .then(function(registration) {
              console.log('Cache-clearing service worker registered');
              registration.update();
            })
            .catch(function(err) {
              console.log('Service worker registration failed:', err);
            });
        });
      }
    </script>
  </body>
</html>