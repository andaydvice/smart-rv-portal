import{j as e}from"./query-DgI8Fk8U.js";import{r as N}from"./vendor-CaRZ0yde.js";import{ak as C,_ as F,$,a0 as w,a1 as v,a2 as d,C as m,o as x,B as f,q as S,r as _,al as A}from"./index-BH7G6QOA.js";import{D as R}from"./DashboardHeader-nWgdeKof.js";import{br as T,G as D,bK as E,b5 as k}from"./ui-CYhkv17t.js";import"./mapbox-X6c54b3e.js";const U=()=>{const{history:l,deleteCalculation:h,isDeleting:p}=C(),[r,g]=N.useState("all"),c=r==="all"?l:l.filter(a=>a.calculator_type===r),u=[...new Set(l.map(a=>a.calculator_type))],n=a=>a.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),j=a=>Object.entries(a).filter(([t,s])=>s!=null&&s!=="").slice(0,3).map(([t,s])=>typeof s=="number"?`${t}: ${s}`:typeof s=="string"&&!isNaN(parseFloat(s))?`${t}: ${parseFloat(s)}`:`${t}: ${s}`).join(", "),b=(a,t)=>{if(t.totalCostFormatted)return t.totalCostFormatted;if(t.efficiencyRatingFormatted)return t.efficiencyRatingFormatted;if(t.gallonsNeededFormatted&&t.totalCostFormatted)return`${t.gallonsNeededFormatted}, ${t.totalCostFormatted}`;switch(a){case"rv_cost":if(typeof t.totalCost=="number")return`Total: $${t.totalCost.toFixed(2)}`;break;case"gas_cost":case"gas-calculator":if(typeof t.totalCost=="number"&&typeof t.gallonsNeeded=="number")return`${t.gallonsNeeded.toFixed(2)} gallons, $${t.totalCost.toFixed(2)}`;break;case"trip_efficiency":if(typeof t.efficiencyRating=="number")return`${t.efficiencyRating.toFixed(1)}% efficiency`;break;default:const i=Object.entries(t).find(([o,y])=>typeof y=="number");if(i)return`${i[0]}: ${i[1]}`}const s=Object.entries(t).find(([i,o])=>typeof o!="object"&&o!==null&&o!==void 0);return s?`${s[0]}: ${s[1]}`:"No valid results"};return e.jsx("div",{className:"py-8 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(R,{title:"Saved Calculations",description:"View and manage your calculation history"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-[#60A5FA]"}),e.jsxs(F,{value:r,onValueChange:g,children:[e.jsx($,{className:"w-48 bg-[#091020] border-gray-700 text-white",children:e.jsx(w,{placeholder:"Filter by type"})}),e.jsxs(v,{className:"bg-[#091020] border-gray-700",children:[e.jsx(d,{value:"all",children:"All Calculations"}),u.map(a=>e.jsx(d,{value:a,children:n(a)},a))]})]})]}),e.jsxs("div",{className:"text-[#E2E8FF] text-sm flex items-center",children:["Showing ",c.length," of ",l.length," calculations"]})]}),c.length===0?e.jsx(m,{className:"bg-[#091020] border-gray-700",children:e.jsxs(x,{className:"p-12 text-center",children:[e.jsx(D,{className:"h-16 w-16 text-gray-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No calculations found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:r==="all"?"Start using our calculators to see your saved results here":`No ${n(r)} calculations found`}),e.jsx(f,{onClick:()=>window.location.href="/calculators",className:"bg-[#60A5FA] hover:bg-blue-600",children:"Go to Calculators"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(a=>e.jsxs(m,{className:"bg-[#091020] border-gray-700",children:[e.jsxs(S,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{className:"text-[#60A5FA] text-lg",children:n(a.calculator_type)}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>h(a.id),disabled:p,className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",children:e.jsx(E,{className:"h-4 w-4"})})]}),e.jsxs(A,{className:"text-[#E2E8FF] flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Inputs:"}),e.jsx("p",{className:"text-gray-400 text-sm",children:j(a.inputs)||"No input data"})]}),a.results&&Object.keys(a.results).length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Results:"}),e.jsx("p",{className:"text-[#60A5FA] text-sm font-medium",children:b(a.calculator_type,a.results)})]})]})]},a.id))})]})})};export{U as default};
