const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DYDVLK3v.js","assets/query-DgI8Fk8U.js","assets/vendor-CaRZ0yde.js","assets/ui-D2SbLSSm.js","assets/mapbox-X6c54b3e.js","assets/index-DfPLcplB.css"])))=>i.map(i=>d[i]);
import{a5 as Qt,a6 as en,a7 as tn,a8 as Fs,b as Oo,B as Lo,C as Xs,a9 as Ys,aa as mn,L as Zs,m as Ze,ab as Us,O as Gs,A as Ws}from"./index-DYDVLK3v.js";import{j as d}from"./query-DgI8Fk8U.js";import{r as N,g as qs,d as C}from"./vendor-CaRZ0yde.js";import{a as ye,b as xe,c as we}from"./tooltip-BPJURuVJ.js";import{b3 as Ks,aN as ne,am as Pe,a6 as lt,a_ as Js,b2 as Qs,ae as ei,l as ti,au as ni}from"./ui-D2SbLSSm.js";import{i as Ue,c as ro,a as so,b as oi}from"./string-CFFdVFMV.js";import"./mapbox-X6c54b3e.js";const ri=()=>d.jsxs(Qt,{value:"bluetooth",className:"border-gray-700",children:[d.jsx(en,{className:"text-blue-300 hover:text-blue-400",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ks,{className:"h-5 w-5"}),"Bluetooth Connectivity"]})}),d.jsxs(tn,{className:"text-gray-300 space-y-4",children:[d.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[d.jsx("h4",{className:"font-medium text-blue-200 mb-2",children:"Common Issues"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Device not appearing in pairing list",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(5-10 min)"})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Connection drops frequently",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(10-15 min)"}),d.jsxs(ye,{children:[d.jsx(xe,{children:d.jsx(Pe,{className:"h-4 w-4 text-yellow-400"})}),d.jsx(we,{children:d.jsx("p",{children:"May indicate interference issues"})})]})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Audio quality issues",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(5-10 min)"})]})})]})]}),d.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[d.jsx("h4",{className:"font-medium text-blue-200 mb-2",children:"Solutions"}),d.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Ensure Bluetooth is enabled on both devices",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(1 min)"})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Clear existing paired devices list",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(2-3 min)"})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Restart both devices",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(5 min)"})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Update device firmware if available",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(15-30 min)"}),d.jsxs(ye,{children:[d.jsx(xe,{children:d.jsx(lt,{className:"h-4 w-4 text-purple-400"})}),d.jsx(we,{children:d.jsx("p",{children:"Contact support if firmware update fails"})})]})]})})]})]}),d.jsxs("div",{className:"bg-red-900/20 p-4 rounded-lg border border-red-800",children:[d.jsxs("h4",{className:"font-medium text-red-400 flex items-center gap-2 mb-2",children:[d.jsx(Pe,{className:"h-4 w-4"}),"Warning Signs"]}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 text-red-300",children:[d.jsx("li",{children:"Multiple devices experiencing simultaneous connection issues"}),d.jsx("li",{children:"Persistent connection drops after all troubleshooting steps"}),d.jsx("li",{children:"Device not detected after firmware update"})]})]})]})]}),si=()=>d.jsxs(Qt,{value:"software",className:"border-gray-700",children:[d.jsx(en,{className:"text-blue-300 hover:text-blue-400",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Js,{className:"h-5 w-5"}),"Software Troubleshooting"]})}),d.jsxs(tn,{className:"text-gray-300 space-y-4",children:[d.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[d.jsx("h4",{className:"font-medium text-blue-200 mb-2",children:"App Data Management"}),d.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Clear app cache",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(2-3 min)"})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Force stop application",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(1 min)"})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Clear app data (Note: This will reset all settings)",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(5 min)"}),d.jsxs(ye,{children:[d.jsx(xe,{children:d.jsx(Pe,{className:"h-4 w-4 text-yellow-400"})}),d.jsx(we,{children:d.jsx("p",{children:"Backup settings before proceeding"})})]})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Reinstall app if issues persist",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(10-15 min)"}),d.jsxs(ye,{children:[d.jsx(xe,{children:d.jsx(lt,{className:"h-4 w-4 text-purple-400"})}),d.jsx(we,{children:d.jsx("p",{children:"Contact support if installation fails"})})]})]})})]})]}),d.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[d.jsx("h4",{className:"font-medium text-blue-200 mb-2",children:"Control Tablet Reset"}),d.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Perform soft reset (hold power button for 10 seconds)",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(2 min)"})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Check for system updates",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(10-30 min)"}),d.jsxs(ye,{children:[d.jsx(xe,{children:d.jsx(Pe,{className:"h-4 w-4 text-yellow-400"})}),d.jsx(we,{children:d.jsx("p",{children:"Ensure stable internet connection"})})]})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Factory reset as last resort",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(30-45 min)"}),d.jsxs(ye,{children:[d.jsx(xe,{children:d.jsx(lt,{className:"h-4 w-4 text-purple-400"})}),d.jsx(we,{children:d.jsx("p",{children:"Professional assistance recommended"})})]})]})})]})]}),d.jsxs("div",{className:"bg-red-900/20 p-4 rounded-lg border border-red-800",children:[d.jsxs("h4",{className:"font-medium text-red-400 flex items-center gap-2 mb-2",children:[d.jsx(Pe,{className:"h-4 w-4"}),"Warning Signs"]}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 text-red-300",children:[d.jsx("li",{children:"System crashes during normal operation"}),d.jsx("li",{children:"Data corruption or unexpected data loss"}),d.jsx("li",{children:"Failed system updates multiple times"})]})]})]})]}),ii=()=>d.jsxs(Qt,{value:"power",className:"border-gray-700",children:[d.jsx(en,{className:"text-blue-300 hover:text-blue-400",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Qs,{className:"h-5 w-5"}),"Power System Diagnostics"]})}),d.jsxs(tn,{className:"text-gray-300 space-y-4",children:[d.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[d.jsx("h4",{className:"font-medium text-blue-200 mb-2",children:"Converter Testing"}),d.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Test output voltage (should be 13.6-14.4V DC)",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(5-10 min)"}),d.jsxs(ye,{children:[d.jsx(xe,{children:d.jsx(lt,{className:"h-4 w-4 text-purple-400"})}),d.jsx(we,{children:d.jsx("p",{children:"Use certified multimeter"})})]})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Check for unusual noise or vibration",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(2-3 min)"}),d.jsxs(ye,{children:[d.jsx(xe,{children:d.jsx(Pe,{className:"h-4 w-4 text-yellow-400"})}),d.jsx(we,{children:d.jsx("p",{children:"Immediate attention needed if present"})})]})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Inspect cooling fan operation",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(5 min)"})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Verify proper grounding",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(10-15 min)"}),d.jsxs(ye,{children:[d.jsx(xe,{children:d.jsx(lt,{className:"h-4 w-4 text-purple-400"})}),d.jsx(we,{children:d.jsx("p",{children:"Professional inspection recommended"})})]})]})})]})]}),d.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[d.jsx("h4",{className:"font-medium text-blue-200 mb-2",children:"Circuit Protection"}),d.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Locate main circuit breaker panel",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(1-2 min)"})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Check for tripped breakers",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(2-3 min)"}),d.jsxs(ye,{children:[d.jsx(xe,{children:d.jsx(Pe,{className:"h-4 w-4 text-yellow-400"})}),d.jsx(we,{children:d.jsx("p",{children:"Note which circuits are affected"})})]})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Inspect fuse box for blown fuses",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(5-10 min)"})]})}),d.jsx("li",{children:d.jsxs("div",{className:"inline-flex items-center gap-2",children:["Test GFCI outlets",d.jsx(ne,{className:"h-4 w-4 text-blue-300"}),d.jsx("span",{className:"text-sm text-blue-300",children:"(10-15 min)"}),d.jsxs(ye,{children:[d.jsx(xe,{children:d.jsx(lt,{className:"h-4 w-4 text-purple-400"})}),d.jsx(we,{children:d.jsx("p",{children:"Professional testing recommended if multiple failures"})})]})]})})]})]}),d.jsxs("div",{className:"bg-red-900/20 p-4 rounded-lg border border-red-800",children:[d.jsxs("h4",{className:"font-medium text-red-400 flex items-center gap-2 mb-2",children:[d.jsx(Pe,{className:"h-4 w-4"}),"Warning Signs"]}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 text-red-300",children:[d.jsx("li",{children:"Burning smell or visible smoke"}),d.jsx("li",{children:"Frequent circuit breaker trips"}),d.jsx("li",{children:"Voltage fluctuations outside normal range"}),d.jsx("li",{children:"Unusual heating of electrical components"})]})]})]})]}),ai=()=>d.jsxs(Qt,{value:"remote",className:"border-gray-700",children:[d.jsx(en,{className:"text-blue-300 hover:text-blue-400",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(ei,{className:"h-5 w-5"}),"Remote Area Connectivity"]})}),d.jsxs(tn,{className:"text-gray-300 space-y-4",children:[d.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[d.jsx("h4",{className:"font-medium text-blue-200 mb-2",children:"Signal Enhancement"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[d.jsx("li",{children:"Install cellular signal booster"}),d.jsx("li",{children:"Use directional antenna for better reception"}),d.jsx("li",{children:"Consider satellite internet options"})]})]}),d.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[d.jsx("h4",{className:"font-medium text-blue-200 mb-2",children:"Connectivity Tips"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[d.jsx("li",{children:"Park in elevated locations when possible"}),d.jsx("li",{children:"Use multiple carriers for redundancy"}),d.jsx("li",{children:"Monitor data usage and speeds"})]})]})]})]}),Fo=()=>d.jsx("div",{className:"bg-[#0B1221] rounded-[24px] border border-gray-800/30 p-6 md:p-8 shadow-lg",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white drop-shadow-lg",children:"Smart System Integration Guide"}),d.jsx("p",{className:"text-gray-200 text-lg",children:"Complete setup and troubleshooting guide for your Smart RV Hub systems"})]}),d.jsx("div",{className:"space-y-4",children:d.jsxs(Fs,{type:"single",collapsible:!0,className:"w-full space-y-2",children:[d.jsx(ri,{}),d.jsx(si,{}),d.jsx(ii,{}),d.jsx(ai,{})]})}),d.jsx("div",{className:"pt-4 md:pt-6",children:d.jsx(Oo,{to:"/documentation/complete",children:d.jsxs(Lo,{variant:"outline",className:"bg-transparent border-[#5B9BD5] text-[#5B9BD5] hover:bg-[#5B9BD5]/20 hover:text-white hover:border-[#5B9BD5] transition-all duration-300 text-sm py-2 px-4",children:["View Complete System Documentation",d.jsx(ti,{className:"ml-2 h-4 w-4"})]})})})]})}),ci=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"}));function ce(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=ce(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Xo={exports:{}},Yo={},Zo={exports:{}},Uo={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ht=N;function li(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ui=typeof Object.is=="function"?Object.is:li,di=ht.useState,fi=ht.useEffect,hi=ht.useLayoutEffect,mi=ht.useDebugValue;function pi(e,t){var n=t(),o=di({inst:{value:n,getSnapshot:t}}),r=o[0].inst,i=o[1];return hi(function(){r.value=n,r.getSnapshot=t,pn(r)&&i({inst:r})},[e,n,t]),fi(function(){return pn(r)&&i({inst:r}),e(function(){pn(r)&&i({inst:r})})},[e]),mi(n),n}function pn(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ui(e,n)}catch{return!0}}function gi(e,t){return t()}var yi=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gi:pi;Uo.useSyncExternalStore=ht.useSyncExternalStore!==void 0?ht.useSyncExternalStore:yi;Zo.exports=Uo;var xi=Zo.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nn=N,wi=xi;function vi(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bi=typeof Object.is=="function"?Object.is:vi,Si=wi.useSyncExternalStore,Ei=nn.useRef,Ni=nn.useEffect,_i=nn.useMemo,Ci=nn.useDebugValue;Yo.useSyncExternalStoreWithSelector=function(e,t,n,o,r){var i=Ei(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=_i(function(){function c(p){if(!u){if(u=!0,l=p,p=o(p),r!==void 0&&s.hasValue){var w=s.value;if(r(w,p))return f=w}return f=p}if(w=f,bi(l,p))return w;var y=o(p);return r!==void 0&&r(w,y)?w:(l=p,f=y)}var u=!1,l,f,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,o,r]);var a=Si(e,i[0],i[1]);return Ni(function(){s.hasValue=!0,s.value=a},[a]),Ci(a),a};Xo.exports=Yo;var Ai=Xo.exports;const Mi=qs(Ai),ki={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_GOOGLE_MAPS_API_KEY:"AIzaSyAGKkTg0DlZd7fCJlfkVNqkRkzPjeqKJ2o",VITE_SUPABASE_PROJECT_ID:"xsypxtfjffgihnmcjfgc",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhzeXB4dGZqZmZnaWhubWNqZmdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ3NzY4MjYsImV4cCI6MjA1MDM1MjgyNn0.6-gFguasJqAQpHhhXaNvnyJbVken6DHtndXISAXpDck",VITE_SUPABASE_URL:"https://xsypxtfjffgihnmcjfgc.supabase.co"},io=e=>{let t;const n=new Set,o=(l,f)=>{const m=typeof l=="function"?l(t):l;if(!Object.is(m,t)){const p=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(w=>w(t,p))}},r=()=>t,c={setState:o,getState:r,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(ki?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(o,r,c);return c},Ti=e=>e?io(e):io,{useDebugValue:ji}=C,{useSyncExternalStoreWithSelector:Ii}=Mi,Di=e=>e;function Go(e,t=Di,n){const o=Ii(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ji(o),o}const ao=(e,t)=>{const n=Ti(e),o=(r,i=t)=>Go(n,r,i);return Object.assign(o,n),o},$i=(e,t)=>e?ao(e,t):ao;function ae(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var zi={value:()=>{}};function on(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Lt(n)}function Lt(e){this._=e}function Pi(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Lt.prototype=on.prototype={constructor:Lt,on:function(e,t){var n=this._,o=Pi(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=Ri(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=co(n[r],e.name,t);else if(t==null)for(r in n)n[r]=co(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Lt(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function Ri(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function co(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=zi,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var En="http://www.w3.org/1999/xhtml";const lo={svg:"http://www.w3.org/2000/svg",xhtml:En,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),lo.hasOwnProperty(t)?{space:lo[t],local:e}:e}function Vi(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===En&&t.documentElement.namespaceURI===En?t.createElement(e):t.createElementNS(n,e)}}function Hi(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Wo(e){var t=rn(e);return(t.local?Hi:Vi)(t)}function Bi(){}function Rn(e){return e==null?Bi:function(){return this.querySelector(e)}}function Oi(e){typeof e!="function"&&(e=Rn(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=new Array(s),c,u,l=0;l<s;++l)(c=i[l])&&(u=e.call(c,c.__data__,l,i))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new ue(o,this._parents)}function Li(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Fi(){return[]}function qo(e){return e==null?Fi:function(){return this.querySelectorAll(e)}}function Xi(e){return function(){return Li(e.apply(this,arguments))}}function Yi(e){typeof e=="function"?e=Xi(e):e=qo(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(o.push(e.call(c,c.__data__,u,s)),r.push(c));return new ue(o,r)}function Ko(e){return function(){return this.matches(e)}}function Jo(e){return function(t){return t.matches(e)}}var Zi=Array.prototype.find;function Ui(e){return function(){return Zi.call(this.children,e)}}function Gi(){return this.firstElementChild}function Wi(e){return this.select(e==null?Gi:Ui(typeof e=="function"?e:Jo(e)))}var qi=Array.prototype.filter;function Ki(){return Array.from(this.children)}function Ji(e){return function(){return qi.call(this.children,e)}}function Qi(e){return this.selectAll(e==null?Ki:Ji(typeof e=="function"?e:Jo(e)))}function ea(e){typeof e!="function"&&(e=Ko(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new ue(o,this._parents)}function Qo(e){return new Array(e.length)}function ta(){return new ue(this._enter||this._groups.map(Qo),this._parents)}function Zt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Zt.prototype={constructor:Zt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function na(e){return function(){return e}}function oa(e,t,n,o,r,i){for(var s=0,a,c=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new Zt(e,i[s]);for(;s<c;++s)(a=t[s])&&(r[s]=a)}function ra(e,t,n,o,r,i,s){var a,c,u=new Map,l=t.length,f=i.length,m=new Array(l),p;for(a=0;a<l;++a)(c=t[a])&&(m[a]=p=s.call(c,c.__data__,a,t)+"",u.has(p)?r[a]=c:u.set(p,c));for(a=0;a<f;++a)p=s.call(e,i[a],a,i)+"",(c=u.get(p))?(o[a]=c,c.__data__=i[a],u.delete(p)):n[a]=new Zt(e,i[a]);for(a=0;a<l;++a)(c=t[a])&&u.get(m[a])===c&&(r[a]=c)}function sa(e){return e.__data__}function ia(e,t){if(!arguments.length)return Array.from(this,sa);var n=t?ra:oa,o=this._parents,r=this._groups;typeof e!="function"&&(e=na(e));for(var i=r.length,s=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var l=o[u],f=r[u],m=f.length,p=aa(e.call(l,l&&l.__data__,u,o)),w=p.length,y=a[u]=new Array(w),v=s[u]=new Array(w),g=c[u]=new Array(m);n(l,f,y,v,g,p,t);for(var E=0,A=0,x,k;E<w;++E)if(x=y[E]){for(E>=A&&(A=E+1);!(k=v[A])&&++A<w;);x._next=k||null}}return s=new ue(s,o),s._enter=a,s._exit=c,s}function aa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ca(){return new ue(this._exit||this._groups.map(Qo),this._parents)}function la(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function ua(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),c=0;c<s;++c)for(var u=n[c],l=o[c],f=u.length,m=a[c]=new Array(f),p,w=0;w<f;++w)(p=u[w]||l[w])&&(m[w]=p);for(;c<r;++c)a[c]=n[c];return new ue(a,this._parents)}function da(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function fa(e){e||(e=ha);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,c=r[i]=new Array(a),u,l=0;l<a;++l)(u=s[l])&&(c[l]=u);c.sort(t)}return new ue(r,this._parents).order()}function ha(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ma(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function pa(){return Array.from(this)}function ga(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function ya(){let e=0;for(const t of this)++e;return e}function xa(){return!this.node()}function wa(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function va(e){return function(){this.removeAttribute(e)}}function ba(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Sa(e,t){return function(){this.setAttribute(e,t)}}function Ea(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Na(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function _a(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ca(e,t){var n=rn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?ba:va:typeof t=="function"?n.local?_a:Na:n.local?Ea:Sa)(n,t))}function er(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Aa(e){return function(){this.style.removeProperty(e)}}function Ma(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ka(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Ta(e,t,n){return arguments.length>1?this.each((t==null?Aa:typeof t=="function"?ka:Ma)(e,t,n??"")):mt(this.node(),e)}function mt(e,t){return e.style.getPropertyValue(t)||er(e).getComputedStyle(e,null).getPropertyValue(t)}function ja(e){return function(){delete this[e]}}function Ia(e,t){return function(){this[e]=t}}function Da(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function $a(e,t){return arguments.length>1?this.each((t==null?ja:typeof t=="function"?Da:Ia)(e,t)):this.node()[e]}function tr(e){return e.trim().split(/^|\s+/)}function Vn(e){return e.classList||new nr(e)}function nr(e){this._node=e,this._names=tr(e.getAttribute("class")||"")}nr.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function or(e,t){for(var n=Vn(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function rr(e,t){for(var n=Vn(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function za(e){return function(){or(this,e)}}function Pa(e){return function(){rr(this,e)}}function Ra(e,t){return function(){(t.apply(this,arguments)?or:rr)(this,e)}}function Va(e,t){var n=tr(e+"");if(arguments.length<2){for(var o=Vn(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Ra:t?za:Pa)(n,t))}function Ha(){this.textContent=""}function Ba(e){return function(){this.textContent=e}}function Oa(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function La(e){return arguments.length?this.each(e==null?Ha:(typeof e=="function"?Oa:Ba)(e)):this.node().textContent}function Fa(){this.innerHTML=""}function Xa(e){return function(){this.innerHTML=e}}function Ya(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Za(e){return arguments.length?this.each(e==null?Fa:(typeof e=="function"?Ya:Xa)(e)):this.node().innerHTML}function Ua(){this.nextSibling&&this.parentNode.appendChild(this)}function Ga(){return this.each(Ua)}function Wa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qa(){return this.each(Wa)}function Ka(e){var t=typeof e=="function"?e:Wo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ja(){return null}function Qa(e,t){var n=typeof e=="function"?e:Wo(e),o=t==null?Ja:typeof t=="function"?t:Rn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function ec(){var e=this.parentNode;e&&e.removeChild(this)}function tc(){return this.each(ec)}function nc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rc(e){return this.select(e?oc:nc)}function sc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ic(e){return function(t){e.call(this,t,this.__data__)}}function ac(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function cc(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function lc(e,t,n){return function(){var o=this.__on,r,i=ic(t);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function uc(e,t,n){var o=ac(e+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(r=0,l=a[c];r<i;++r)if((s=o[r]).type===l.type&&s.name===l.name)return l.value}return}for(a=t?lc:cc,r=0;r<i;++r)this.each(a(o[r],t,n));return this}function sr(e,t,n){var o=er(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function dc(e,t){return function(){return sr(this,e,t)}}function fc(e,t){return function(){return sr(this,e,t.apply(this,arguments))}}function hc(e,t){return this.each((typeof t=="function"?fc:dc)(e,t))}function*mc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var ir=[null];function ue(e,t){this._groups=e,this._parents=t}function It(){return new ue([[document.documentElement]],ir)}function pc(){return this}ue.prototype=It.prototype={constructor:ue,select:Oi,selectAll:Yi,selectChild:Wi,selectChildren:Qi,filter:ea,data:ia,enter:ta,exit:ca,join:la,merge:ua,selection:pc,order:da,sort:fa,call:ma,nodes:pa,node:ga,size:ya,empty:xa,each:wa,attr:Ca,style:Ta,property:$a,classed:Va,text:La,html:Za,raise:Ga,lower:qa,append:Ka,insert:Qa,remove:tc,clone:rc,datum:sc,on:uc,dispatch:hc,[Symbol.iterator]:mc};function ve(e){return typeof e=="string"?new ue([[document.querySelector(e)]],[document.documentElement]):new ue([[e]],ir)}function gc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ce(e,t){if(e=gc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const yc={passive:!1},Mt={capture:!0,passive:!1};function gn(e){e.stopImmediatePropagation()}function ut(e){e.preventDefault(),e.stopImmediatePropagation()}function ar(e){var t=e.document.documentElement,n=ve(e).on("dragstart.drag",ut,Mt);"onselectstart"in t?n.on("selectstart.drag",ut,Mt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function cr(e,t){var n=e.document.documentElement,o=ve(e).on("dragstart.drag",null);t&&(o.on("click.drag",ut,Mt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const $t=e=>()=>e;function Nn(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:s,y:a,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}Nn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function xc(e){return!e.ctrlKey&&!e.button}function wc(){return this.parentNode}function vc(e,t){return t??{x:e.x,y:e.y}}function bc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sc(){var e=xc,t=wc,n=vc,o=bc,r={},i=on("start","drag","end"),s=0,a,c,u,l,f=0;function m(x){x.on("mousedown.drag",p).filter(o).on("touchstart.drag",v).on("touchmove.drag",g,yc).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(x,k){if(!(l||!e.call(this,x,k))){var T=A(this,t.call(this,x,k),x,k,"mouse");T&&(ve(x.view).on("mousemove.drag",w,Mt).on("mouseup.drag",y,Mt),ar(x.view),gn(x),u=!1,a=x.clientX,c=x.clientY,T("start",x))}}function w(x){if(ut(x),!u){var k=x.clientX-a,T=x.clientY-c;u=k*k+T*T>f}r.mouse("drag",x)}function y(x){ve(x.view).on("mousemove.drag mouseup.drag",null),cr(x.view,u),ut(x),r.mouse("end",x)}function v(x,k){if(e.call(this,x,k)){var T=x.changedTouches,V=t.call(this,x,k),P=T.length,I,H;for(I=0;I<P;++I)(H=A(this,V,x,k,T[I].identifier,T[I]))&&(gn(x),H("start",x,T[I]))}}function g(x){var k=x.changedTouches,T=k.length,V,P;for(V=0;V<T;++V)(P=r[k[V].identifier])&&(ut(x),P("drag",x,k[V]))}function E(x){var k=x.changedTouches,T=k.length,V,P;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),V=0;V<T;++V)(P=r[k[V].identifier])&&(gn(x),P("end",x,k[V]))}function A(x,k,T,V,P,I){var H=i.copy(),B=Ce(I||T,k),O,R,h;if((h=n.call(x,new Nn("beforestart",{sourceEvent:T,target:m,identifier:P,active:s,x:B[0],y:B[1],dx:0,dy:0,dispatch:H}),V))!=null)return O=h.x-B[0]||0,R=h.y-B[1]||0,function _(b,M,$){var S=B,j;switch(b){case"start":r[P]=_,j=s++;break;case"end":delete r[P],--s;case"drag":B=Ce($||M,k),j=s;break}H.call(b,x,new Nn(b,{sourceEvent:M,subject:h,target:m,identifier:P,active:j,x:B[0]+O,y:B[1]+R,dx:B[0]-S[0],dy:B[1]-S[1],dispatch:H}),V)}}return m.filter=function(x){return arguments.length?(e=typeof x=="function"?x:$t(!!x),m):e},m.container=function(x){return arguments.length?(t=typeof x=="function"?x:$t(x),m):t},m.subject=function(x){return arguments.length?(n=typeof x=="function"?x:$t(x),m):n},m.touchable=function(x){return arguments.length?(o=typeof x=="function"?x:$t(!!x),m):o},m.on=function(){var x=i.on.apply(i,arguments);return x===i?m:x},m.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,m):Math.sqrt(f)},m}var uo=180/Math.PI,_n={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lr(e,t,n,o,r,i){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*o)&&(n-=e*c,o-=t*c),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,c/=a),e*o<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*uo,skewX:Math.atan(c)*uo,scaleX:s,scaleY:a}}var zt;function Ec(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_n:lr(t.a,t.b,t.c,t.d,t.e,t.f)}function Nc(e){return e==null||(zt||(zt=document.createElementNS("http://www.w3.org/2000/svg","g")),zt.setAttribute("transform",e),!(e=zt.transform.baseVal.consolidate()))?_n:(e=e.matrix,lr(e.a,e.b,e.c,e.d,e.e,e.f))}function ur(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,l,f,m,p,w){if(u!==f||l!==m){var y=p.push("translate(",null,t,null,n);w.push({i:y-4,x:Ue(u,f)},{i:y-2,x:Ue(l,m)})}else(f||m)&&p.push("translate("+f+t+m+n)}function s(u,l,f,m){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),m.push({i:f.push(r(f)+"rotate(",null,o)-2,x:Ue(u,l)})):l&&f.push(r(f)+"rotate("+l+o)}function a(u,l,f,m){u!==l?m.push({i:f.push(r(f)+"skewX(",null,o)-2,x:Ue(u,l)}):l&&f.push(r(f)+"skewX("+l+o)}function c(u,l,f,m,p,w){if(u!==f||l!==m){var y=p.push(r(p)+"scale(",null,",",null,")");w.push({i:y-4,x:Ue(u,f)},{i:y-2,x:Ue(l,m)})}else(f!==1||m!==1)&&p.push(r(p)+"scale("+f+","+m+")")}return function(u,l){var f=[],m=[];return u=e(u),l=e(l),i(u.translateX,u.translateY,l.translateX,l.translateY,f,m),s(u.rotate,l.rotate,f,m),a(u.skewX,l.skewX,f,m),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,f,m),u=l=null,function(p){for(var w=-1,y=m.length,v;++w<y;)f[(v=m[w]).i]=v.x(p);return f.join("")}}}var _c=ur(Ec,"px, ","px)","deg)"),Cc=ur(Nc,", ",")",")"),Ac=1e-12;function fo(e){return((e=Math.exp(e))+1/e)/2}function Mc(e){return((e=Math.exp(e))-1/e)/2}function kc(e){return((e=Math.exp(2*e))-1)/(e+1)}const Tc=function e(t,n,o){function r(i,s){var a=i[0],c=i[1],u=i[2],l=s[0],f=s[1],m=s[2],p=l-a,w=f-c,y=p*p+w*w,v,g;if(y<Ac)g=Math.log(m/u)/t,v=function(V){return[a+V*p,c+V*w,u*Math.exp(t*V*g)]};else{var E=Math.sqrt(y),A=(m*m-u*u+o*y)/(2*u*n*E),x=(m*m-u*u-o*y)/(2*m*n*E),k=Math.log(Math.sqrt(A*A+1)-A),T=Math.log(Math.sqrt(x*x+1)-x);g=(T-k)/t,v=function(V){var P=V*g,I=fo(k),H=u/(n*E)*(I*kc(t*P+k)-Mc(k));return[a+H*p,c+H*w,u*I/fo(t*P+k)]}}return v.duration=g*1e3*t/Math.SQRT2,v}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,c=a*a;return e(s,a,c)},r}(Math.SQRT2,2,4);var pt=0,_t=0,vt=0,dr=1e3,Ut,Ct,Gt=0,qe=0,sn=0,kt=typeof performance=="object"&&performance.now?performance:Date,fr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Hn(){return qe||(fr(jc),qe=kt.now()+sn)}function jc(){qe=0}function Wt(){this._call=this._time=this._next=null}Wt.prototype=hr.prototype={constructor:Wt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Hn():+n)+(t==null?0:+t),!this._next&&Ct!==this&&(Ct?Ct._next=this:Ut=this,Ct=this),this._call=e,this._time=n,Cn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Cn())}};function hr(e,t,n){var o=new Wt;return o.restart(e,t,n),o}function Ic(){Hn(),++pt;for(var e=Ut,t;e;)(t=qe-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pt}function ho(){qe=(Gt=kt.now())+sn,pt=_t=0;try{Ic()}finally{pt=0,$c(),qe=0}}function Dc(){var e=kt.now(),t=e-Gt;t>dr&&(sn-=t,Gt=e)}function $c(){for(var e,t=Ut,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ut=n);Ct=e,Cn(o)}function Cn(e){if(!pt){_t&&(_t=clearTimeout(_t));var t=e-qe;t>24?(e<1/0&&(_t=setTimeout(ho,e-kt.now()-sn)),vt&&(vt=clearInterval(vt))):(vt||(Gt=kt.now(),vt=setInterval(Dc,dr)),pt=1,fr(ho))}}function mo(e,t,n){var o=new Wt;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var zc=on("start","end","cancel","interrupt"),Pc=[],mr=0,po=1,An=2,Ft=3,go=4,Mn=5,Xt=6;function an(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Rc(e,n,{name:t,index:o,group:r,on:zc,tween:Pc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:mr})}function Bn(e,t){var n=Se(e,t);if(n.state>mr)throw new Error("too late; already scheduled");return n}function Ae(e,t){var n=Se(e,t);if(n.state>Ft)throw new Error("too late; already running");return n}function Se(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Rc(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=hr(i,0,n.time);function i(u){n.state=po,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var l,f,m,p;if(n.state!==po)return c();for(l in o)if(p=o[l],p.name===n.name){if(p.state===Ft)return mo(s);p.state===go?(p.state=Xt,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete o[l]):+l<t&&(p.state=Xt,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete o[l])}if(mo(function(){n.state===Ft&&(n.state=go,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=An,n.on.call("start",e,e.__data__,n.index,n.group),n.state===An){for(n.state=Ft,r=new Array(m=n.tween.length),l=0,f=-1;l<m;++l)(p=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=p);r.length=f+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Mn,1),f=-1,m=r.length;++f<m;)r[f].call(e,l);n.state===Mn&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Xt,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Yt(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>An&&o.state<Mn,o.state=Xt,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function Vc(e){return this.each(function(){Yt(this,e)})}function Hc(e,t){var n,o;return function(){var r=Ae(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function Bc(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Ae(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=a;break}c===u&&r.push(a)}i.tween=r}}function Oc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Se(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?Hc:Bc)(n,e,t))}function On(e,t,n){var o=e._id;return e.each(function(){var r=Ae(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Se(r,o).value[t]}}function pr(e,t){var n;return(typeof t=="number"?Ue:t instanceof ro?so:(n=ro(t))?(t=n,so):oi)(e,t)}function Lc(e){return function(){this.removeAttribute(e)}}function Fc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xc(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function Yc(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function Zc(e,t,n){var o,r,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===o&&c===r?i:(r=c,i=t(o=s,a)))}}function Uc(e,t,n){var o,r,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===o&&c===r?i:(r=c,i=t(o=s,a)))}}function Gc(e,t){var n=rn(e),o=n==="transform"?Cc:pr;return this.attrTween(e,typeof t=="function"?(n.local?Uc:Zc)(n,o,On(this,"attr."+e,t)):t==null?(n.local?Fc:Lc)(n):(n.local?Yc:Xc)(n,o,t))}function Wc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function qc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Kc(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&qc(e,i)),n}return r._value=t,r}function Jc(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&Wc(e,i)),n}return r._value=t,r}function Qc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=rn(e);return this.tween(n,(o.local?Kc:Jc)(o,t))}function el(e,t){return function(){Bn(this,e).delay=+t.apply(this,arguments)}}function tl(e,t){return t=+t,function(){Bn(this,e).delay=t}}function nl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?el:tl)(t,e)):Se(this.node(),t).delay}function ol(e,t){return function(){Ae(this,e).duration=+t.apply(this,arguments)}}function rl(e,t){return t=+t,function(){Ae(this,e).duration=t}}function sl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ol:rl)(t,e)):Se(this.node(),t).duration}function il(e,t){if(typeof t!="function")throw new Error;return function(){Ae(this,e).ease=t}}function al(e){var t=this._id;return arguments.length?this.each(il(t,e)):Se(this.node(),t).ease}function cl(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ae(this,e).ease=n}}function ll(e){if(typeof e!="function")throw new Error;return this.each(cl(this._id,e))}function ul(e){typeof e!="function"&&(e=Ko(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new je(o,this._parents,this._name,this._id)}function dl(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var c=t[a],u=n[a],l=c.length,f=s[a]=new Array(l),m,p=0;p<l;++p)(m=c[p]||u[p])&&(f[p]=m);for(;a<o;++a)s[a]=t[a];return new je(s,this._parents,this._name,this._id)}function fl(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function hl(e,t,n){var o,r,i=fl(t)?Bn:Ae;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}function ml(e,t){var n=this._id;return arguments.length<2?Se(this.node(),n).on.on(e):this.each(hl(n,e,t))}function pl(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function gl(){return this.on("end.remove",pl(this._id))}function yl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Rn(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],c=a.length,u=i[s]=new Array(c),l,f,m=0;m<c;++m)(l=a[m])&&(f=e.call(l,l.__data__,m,a))&&("__data__"in l&&(f.__data__=l.__data__),u[m]=f,an(u[m],t,n,m,u,Se(l,n)));return new je(i,this._parents,t,n)}function xl(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qo(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var c=o[a],u=c.length,l,f=0;f<u;++f)if(l=c[f]){for(var m=e.call(l,l.__data__,f,c),p,w=Se(l,n),y=0,v=m.length;y<v;++y)(p=m[y])&&an(p,t,n,y,m,w);i.push(m),s.push(l)}return new je(i,s,t,n)}var wl=It.prototype.constructor;function vl(){return new wl(this._groups,this._parents)}function bl(e,t){var n,o,r;return function(){var i=mt(this,e),s=(this.style.removeProperty(e),mt(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function gr(e){return function(){this.style.removeProperty(e)}}function Sl(e,t,n){var o,r=n+"",i;return function(){var s=mt(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function El(e,t,n){var o,r,i;return function(){var s=mt(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),mt(this,e))),s===c?null:s===o&&c===r?i:(r=c,i=t(o=s,a))}}function Nl(e,t){var n,o,r,i="style."+t,s="end."+i,a;return function(){var c=Ae(this,e),u=c.on,l=c.value[i]==null?a||(a=gr(t)):void 0;(u!==n||r!==l)&&(o=(n=u).copy()).on(s,r=l),c.on=o}}function _l(e,t,n){var o=(e+="")=="transform"?_c:pr;return t==null?this.styleTween(e,bl(e,o)).on("end.style."+e,gr(e)):typeof t=="function"?this.styleTween(e,El(e,o,On(this,"style."+e,t))).each(Nl(this._id,e)):this.styleTween(e,Sl(e,o,t),n).on("end.style."+e,null)}function Cl(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Al(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&Cl(e,s,n)),o}return i._value=t,i}function Ml(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Al(e,t,n??""))}function kl(e){return function(){this.textContent=e}}function Tl(e){return function(){var t=e(this);this.textContent=t??""}}function jl(e){return this.tween("text",typeof e=="function"?Tl(On(this,"text",e)):kl(e==null?"":e+""))}function Il(e){return function(t){this.textContent=e.call(this,t)}}function Dl(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Il(r)),t}return o._value=e,o}function $l(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Dl(e))}function zl(){for(var e=this._name,t=this._id,n=yr(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var l=Se(c,t);an(c,e,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new je(o,this._parents,e,n)}function Pl(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--r===0&&i()}};n.each(function(){var u=Ae(this,o),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),r===0&&i()})}var Rl=0;function je(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function yr(){return++Rl}var ke=It.prototype;je.prototype={constructor:je,select:yl,selectAll:xl,selectChild:ke.selectChild,selectChildren:ke.selectChildren,filter:ul,merge:dl,selection:vl,transition:zl,call:ke.call,nodes:ke.nodes,node:ke.node,size:ke.size,empty:ke.empty,each:ke.each,on:ml,attr:Gc,attrTween:Qc,style:_l,styleTween:Ml,text:jl,textTween:$l,remove:gl,tween:Oc,delay:nl,duration:sl,ease:al,easeVarying:ll,end:Pl,[Symbol.iterator]:ke[Symbol.iterator]};function Vl(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Hl={time:null,delay:0,duration:250,ease:Vl};function Bl(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ol(e){var t,n;e instanceof je?(t=e._id,e=e._name):(t=yr(),(n=Hl).time=Hn(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&an(c,e,t,u,s,n||Bl(c,t));return new je(o,this._parents,e,t)}It.prototype.interrupt=Vc;It.prototype.transition=Ol;const Pt=e=>()=>e;function Ll(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Te(e,t,n){this.k=e,this.x=t,this.y=n}Te.prototype={constructor:Te,scale:function(e){return e===1?this:new Te(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Te(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Re=new Te(1,0,0);Te.prototype;function yn(e){e.stopImmediatePropagation()}function bt(e){e.preventDefault(),e.stopImmediatePropagation()}function Fl(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Xl(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function yo(){return this.__zoom||Re}function Yl(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Zl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ul(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Gl(){var e=Fl,t=Xl,n=Ul,o=Yl,r=Zl,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Tc,u=on("start","zoom","end"),l,f,m,p=500,w=150,y=0,v=10;function g(h){h.property("__zoom",yo).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",H).filter(r).on("touchstart.zoom",B).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(h,_,b,M){var $=h.selection?h.selection():h;$.property("__zoom",yo),h!==$?k(h,_,b,M):$.interrupt().each(function(){T(this,arguments).event(M).start().zoom(null,typeof _=="function"?_.apply(this,arguments):_).end()})},g.scaleBy=function(h,_,b,M){g.scaleTo(h,function(){var $=this.__zoom.k,S=typeof _=="function"?_.apply(this,arguments):_;return $*S},b,M)},g.scaleTo=function(h,_,b,M){g.transform(h,function(){var $=t.apply(this,arguments),S=this.__zoom,j=b==null?x($):typeof b=="function"?b.apply(this,arguments):b,D=S.invert(j),z=typeof _=="function"?_.apply(this,arguments):_;return n(A(E(S,z),j,D),$,s)},b,M)},g.translateBy=function(h,_,b,M){g.transform(h,function(){return n(this.__zoom.translate(typeof _=="function"?_.apply(this,arguments):_,typeof b=="function"?b.apply(this,arguments):b),t.apply(this,arguments),s)},null,M)},g.translateTo=function(h,_,b,M,$){g.transform(h,function(){var S=t.apply(this,arguments),j=this.__zoom,D=M==null?x(S):typeof M=="function"?M.apply(this,arguments):M;return n(Re.translate(D[0],D[1]).scale(j.k).translate(typeof _=="function"?-_.apply(this,arguments):-_,typeof b=="function"?-b.apply(this,arguments):-b),S,s)},M,$)};function E(h,_){return _=Math.max(i[0],Math.min(i[1],_)),_===h.k?h:new Te(_,h.x,h.y)}function A(h,_,b){var M=_[0]-b[0]*h.k,$=_[1]-b[1]*h.k;return M===h.x&&$===h.y?h:new Te(h.k,M,$)}function x(h){return[(+h[0][0]+ +h[1][0])/2,(+h[0][1]+ +h[1][1])/2]}function k(h,_,b,M){h.on("start.zoom",function(){T(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(M).end()}).tween("zoom",function(){var $=this,S=arguments,j=T($,S).event(M),D=t.apply($,S),z=b==null?x(D):typeof b=="function"?b.apply($,S):b,F=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),L=$.__zoom,Z=typeof _=="function"?_.apply($,S):_,G=c(L.invert(z).concat(F/L.k),Z.invert(z).concat(F/Z.k));return function(W){if(W===1)W=Z;else{var q=G(W),ee=F/q[2];W=new Te(ee,z[0]-q[0]*ee,z[1]-q[1]*ee)}j.zoom(null,W)}})}function T(h,_,b){return!b&&h.__zooming||new V(h,_)}function V(h,_){this.that=h,this.args=_,this.active=0,this.sourceEvent=null,this.extent=t.apply(h,_),this.taps=0}V.prototype={event:function(h){return h&&(this.sourceEvent=h),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(h,_){return this.mouse&&h!=="mouse"&&(this.mouse[1]=_.invert(this.mouse[0])),this.touch0&&h!=="touch"&&(this.touch0[1]=_.invert(this.touch0[0])),this.touch1&&h!=="touch"&&(this.touch1[1]=_.invert(this.touch1[0])),this.that.__zoom=_,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(h){var _=ve(this.that).datum();u.call(h,this.that,new Ll(h,{sourceEvent:this.sourceEvent,target:g,type:h,transform:this.that.__zoom,dispatch:u}),_)}};function P(h,..._){if(!e.apply(this,arguments))return;var b=T(this,_).event(h),M=this.__zoom,$=Math.max(i[0],Math.min(i[1],M.k*Math.pow(2,o.apply(this,arguments)))),S=Ce(h);if(b.wheel)(b.mouse[0][0]!==S[0]||b.mouse[0][1]!==S[1])&&(b.mouse[1]=M.invert(b.mouse[0]=S)),clearTimeout(b.wheel);else{if(M.k===$)return;b.mouse=[S,M.invert(S)],Yt(this),b.start()}bt(h),b.wheel=setTimeout(j,w),b.zoom("mouse",n(A(E(M,$),b.mouse[0],b.mouse[1]),b.extent,s));function j(){b.wheel=null,b.end()}}function I(h,..._){if(m||!e.apply(this,arguments))return;var b=h.currentTarget,M=T(this,_,!0).event(h),$=ve(h.view).on("mousemove.zoom",z,!0).on("mouseup.zoom",F,!0),S=Ce(h,b),j=h.clientX,D=h.clientY;ar(h.view),yn(h),M.mouse=[S,this.__zoom.invert(S)],Yt(this),M.start();function z(L){if(bt(L),!M.moved){var Z=L.clientX-j,G=L.clientY-D;M.moved=Z*Z+G*G>y}M.event(L).zoom("mouse",n(A(M.that.__zoom,M.mouse[0]=Ce(L,b),M.mouse[1]),M.extent,s))}function F(L){$.on("mousemove.zoom mouseup.zoom",null),cr(L.view,M.moved),bt(L),M.event(L).end()}}function H(h,..._){if(e.apply(this,arguments)){var b=this.__zoom,M=Ce(h.changedTouches?h.changedTouches[0]:h,this),$=b.invert(M),S=b.k*(h.shiftKey?.5:2),j=n(A(E(b,S),M,$),t.apply(this,_),s);bt(h),a>0?ve(this).transition().duration(a).call(k,j,M,h):ve(this).call(g.transform,j,M,h)}}function B(h,..._){if(e.apply(this,arguments)){var b=h.touches,M=b.length,$=T(this,_,h.changedTouches.length===M).event(h),S,j,D,z;for(yn(h),j=0;j<M;++j)D=b[j],z=Ce(D,this),z=[z,this.__zoom.invert(z),D.identifier],$.touch0?!$.touch1&&$.touch0[2]!==z[2]&&($.touch1=z,$.taps=0):($.touch0=z,S=!0,$.taps=1+!!l);l&&(l=clearTimeout(l)),S&&($.taps<2&&(f=z[0],l=setTimeout(function(){l=null},p)),Yt(this),$.start())}}function O(h,..._){if(this.__zooming){var b=T(this,_).event(h),M=h.changedTouches,$=M.length,S,j,D,z;for(bt(h),S=0;S<$;++S)j=M[S],D=Ce(j,this),b.touch0&&b.touch0[2]===j.identifier?b.touch0[0]=D:b.touch1&&b.touch1[2]===j.identifier&&(b.touch1[0]=D);if(j=b.that.__zoom,b.touch1){var F=b.touch0[0],L=b.touch0[1],Z=b.touch1[0],G=b.touch1[1],W=(W=Z[0]-F[0])*W+(W=Z[1]-F[1])*W,q=(q=G[0]-L[0])*q+(q=G[1]-L[1])*q;j=E(j,Math.sqrt(W/q)),D=[(F[0]+Z[0])/2,(F[1]+Z[1])/2],z=[(L[0]+G[0])/2,(L[1]+G[1])/2]}else if(b.touch0)D=b.touch0[0],z=b.touch0[1];else return;b.zoom("touch",n(A(j,D,z),b.extent,s))}}function R(h,..._){if(this.__zooming){var b=T(this,_).event(h),M=h.changedTouches,$=M.length,S,j;for(yn(h),m&&clearTimeout(m),m=setTimeout(function(){m=null},p),S=0;S<$;++S)j=M[S],b.touch0&&b.touch0[2]===j.identifier?delete b.touch0:b.touch1&&b.touch1[2]===j.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(j=Ce(j,this),Math.hypot(f[0]-j[0],f[1]-j[1])<v)){var D=ve(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return g.wheelDelta=function(h){return arguments.length?(o=typeof h=="function"?h:Pt(+h),g):o},g.filter=function(h){return arguments.length?(e=typeof h=="function"?h:Pt(!!h),g):e},g.touchable=function(h){return arguments.length?(r=typeof h=="function"?h:Pt(!!h),g):r},g.extent=function(h){return arguments.length?(t=typeof h=="function"?h:Pt([[+h[0][0],+h[0][1]],[+h[1][0],+h[1][1]]]),g):t},g.scaleExtent=function(h){return arguments.length?(i[0]=+h[0],i[1]=+h[1],g):[i[0],i[1]]},g.translateExtent=function(h){return arguments.length?(s[0][0]=+h[0][0],s[1][0]=+h[1][0],s[0][1]=+h[0][1],s[1][1]=+h[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(h){return arguments.length?(n=h,g):n},g.duration=function(h){return arguments.length?(a=+h,g):a},g.interpolate=function(h){return arguments.length?(c=h,g):c},g.on=function(){var h=u.on.apply(u,arguments);return h===u?g:h},g.clickDistance=function(h){return arguments.length?(y=(h=+h)*h,g):Math.sqrt(y)},g.tapDistance=function(h){return arguments.length?(v=+h,g):v},g}const cn=N.createContext(null),Wl=cn.Provider,Ie={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},xr=Ie.error001();function Q(e,t){const n=N.useContext(cn);if(n===null)throw new Error(xr);return Go(n,e,t)}const se=()=>{const e=N.useContext(cn);if(e===null)throw new Error(xr);return N.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},ql=e=>e.userSelectionActive?"none":"all";function wr({position:e,children:t,className:n,style:o,...r}){const i=Q(ql),s=`${e}`.split("-");return C.createElement("div",{className:ce(["react-flow__panel",n,...s]),style:{...o,pointerEvents:i},...r},t)}function Kl({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:C.createElement(wr,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},C.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Jl=({x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...l})=>{const f=N.useRef(null),[m,p]=N.useState({x:0,y:0,width:0,height:0}),w=ce(["react-flow__edge-textwrapper",u]);return N.useEffect(()=>{if(f.current){const y=f.current.getBBox();p({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:C.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:w,visibility:m.width?"visible":"hidden",...l},r&&C.createElement("rect",{width:m.width+2*s[0],x:-s[0],y:-s[1],height:m.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),C.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:f,style:o},n),c)};var Ql=N.memo(Jl);const Ln=e=>({width:e.offsetWidth,height:e.offsetHeight}),gt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Fn=(e={x:0,y:0},t)=>({x:gt(e.x,t[0][0],t[1][0]),y:gt(e.y,t[0][1],t[1][1])}),xo=(e,t,n)=>e<t?gt(Math.abs(e-t),1,50)/50:e>n?-gt(Math.abs(e-n),1,50)/50:0,vr=(e,t)=>{const n=xo(e.x,35,t.width-35)*20,o=xo(e.y,35,t.height-35)*20;return[n,o]},br=e=>e.getRootNode?.()||window?.document,eu=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Xn=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),tu=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),wo=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),kn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},nu=e=>he(e.width)&&he(e.height)&&he(e.x)&&he(e.y),he=e=>!isNaN(e)&&isFinite(e),oe=Symbol.for("internals"),Sr=["Enter"," ","Escape"],ou=(e,t)=>{},ru=e=>"nativeEvent"in e;function Tn(e){const n=(ru(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Er=e=>"clientX"in e,Ve=(e,t)=>{const n=Er(e),o=n?e.clientX:e.touches?.[0].clientX,r=n?e.clientY:e.touches?.[0].clientY;return{x:o-(t?.left??0),y:r-(t?.top??0)}},qt=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Dt=({id:e,path:t,labelX:n,labelY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:f,markerStart:m,interactionWidth:p=20})=>C.createElement(C.Fragment,null,C.createElement("path",{id:e,style:l,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:m}),p&&C.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),r&&he(n)&&he(o)?C.createElement(Ql,{x:n,y:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);Dt.displayName="BaseEdge";function St(e,t,n){return n===void 0?n:o=>{const r=t().edges.find(i=>i.id===e);r&&n(o,{...r})}}function Nr({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,a=o<t?o+s:o-s;return[i,a,r,s]}function _r({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){const c=e*.125+r*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+o*.125,l=Math.abs(c-e),f=Math.abs(u-t);return[c,u,l,f]}var Ke;(function(e){e.Strict="strict",e.Loose="loose"})(Ke||(Ke={}));var We;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(We||(We={}));var Tt;(function(e){e.Partial="partial",e.Full="full"})(Tt||(Tt={}));var ze;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ze||(ze={}));var te;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(te||(te={}));var X;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(X||(X={}));function vo({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===X.Left||e===X.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function Cr({sourceX:e,sourceY:t,sourcePosition:n=X.Bottom,targetX:o,targetY:r,targetPosition:i=X.Top}){const[s,a]=vo({pos:n,x1:e,y1:t,x2:o,y2:r}),[c,u]=vo({pos:i,x1:o,y1:r,x2:e,y2:t}),[l,f,m,p]=_r({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${a} ${c},${u} ${o},${r}`,l,f,m,p]}const Yn=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=X.Bottom,targetPosition:i=X.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:m,markerEnd:p,markerStart:w,interactionWidth:y})=>{const[v,g,E]=Cr({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:i});return C.createElement(Dt,{path:v,labelX:g,labelY:E,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:m,markerEnd:p,markerStart:w,interactionWidth:y})});Yn.displayName="SimpleBezierEdge";const bo={[X.Left]:{x:-1,y:0},[X.Right]:{x:1,y:0},[X.Top]:{x:0,y:-1},[X.Bottom]:{x:0,y:1}},su=({source:e,sourcePosition:t=X.Bottom,target:n})=>t===X.Left||t===X.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},So=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function iu({source:e,sourcePosition:t=X.Bottom,target:n,targetPosition:o=X.Top,center:r,offset:i}){const s=bo[t],a=bo[o],c={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},l=su({source:c,sourcePosition:t,target:u}),f=l.x!==0?"x":"y",m=l[f];let p=[],w,y;const v={x:0,y:0},g={x:0,y:0},[E,A,x,k]=Nr({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*a[f]===-1){w=r.x??E,y=r.y??A;const V=[{x:w,y:c.y},{x:w,y:u.y}],P=[{x:c.x,y},{x:u.x,y}];s[f]===m?p=f==="x"?V:P:p=f==="x"?P:V}else{const V=[{x:c.x,y:u.y}],P=[{x:u.x,y:c.y}];if(f==="x"?p=s.x===m?P:V:p=s.y===m?V:P,t===o){const R=Math.abs(e[f]-n[f]);if(R<=i){const h=Math.min(i-1,i-R);s[f]===m?v[f]=(c[f]>e[f]?-1:1)*h:g[f]=(u[f]>n[f]?-1:1)*h}}if(t!==o){const R=f==="x"?"y":"x",h=s[f]===a[R],_=c[R]>u[R],b=c[R]<u[R];(s[f]===1&&(!h&&_||h&&b)||s[f]!==1&&(!h&&b||h&&_))&&(p=f==="x"?V:P)}const I={x:c.x+v.x,y:c.y+v.y},H={x:u.x+g.x,y:u.y+g.y},B=Math.max(Math.abs(I.x-p[0].x),Math.abs(H.x-p[0].x)),O=Math.max(Math.abs(I.y-p[0].y),Math.abs(H.y-p[0].y));B>=O?(w=(I.x+H.x)/2,y=p[0].y):(w=p[0].x,y=(I.y+H.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...p,{x:u.x+g.x,y:u.y+g.y},n],w,y,x,k]}function au(e,t,n,o){const r=Math.min(So(e,t)/2,So(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${i+r*u},${s}Q ${i},${s} ${i},${s+r*l}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${s+r*c}Q ${i},${s} ${i+r*a},${s}`}function jn({sourceX:e,sourceY:t,sourcePosition:n=X.Bottom,targetX:o,targetY:r,targetPosition:i=X.Top,borderRadius:s=5,centerX:a,centerY:c,offset:u=20}){const[l,f,m,p,w]=iu({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:a,y:c},offset:u});return[l.reduce((v,g,E)=>{let A="";return E>0&&E<l.length-1?A=au(l[E-1],g,l[E+1],s):A=`${E===0?"M":"L"}${g.x} ${g.y}`,v+=A,v},""),f,m,p,w]}const ln=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,sourcePosition:f=X.Bottom,targetPosition:m=X.Top,markerEnd:p,markerStart:w,pathOptions:y,interactionWidth:v})=>{const[g,E,A]=jn({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:o,targetPosition:m,borderRadius:y?.borderRadius,offset:y?.offset});return C.createElement(Dt,{path:g,labelX:E,labelY:A,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:p,markerStart:w,interactionWidth:v})});ln.displayName="SmoothStepEdge";const Zn=N.memo(e=>C.createElement(ln,{...e,pathOptions:N.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Zn.displayName="StepEdge";function cu({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,i,s,a]=Nr({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,i,s,a]}const Un=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:f,markerStart:m,interactionWidth:p})=>{const[w,y,v]=cu({sourceX:e,sourceY:t,targetX:n,targetY:o});return C.createElement(Dt,{path:w,labelX:y,labelY:v,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:f,markerStart:m,interactionWidth:p})});Un.displayName="StraightEdge";function Rt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Eo({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){switch(e){case X.Left:return[t-Rt(t-o,i),n];case X.Right:return[t+Rt(o-t,i),n];case X.Top:return[t,n-Rt(n-r,i)];case X.Bottom:return[t,n+Rt(r-n,i)]}}function Ar({sourceX:e,sourceY:t,sourcePosition:n=X.Bottom,targetX:o,targetY:r,targetPosition:i=X.Top,curvature:s=.25}){const[a,c]=Eo({pos:n,x1:e,y1:t,x2:o,y2:r,c:s}),[u,l]=Eo({pos:i,x1:o,y1:r,x2:e,y2:t,c:s}),[f,m,p,w]=_r({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:l});return[`M${e},${t} C${a},${c} ${u},${l} ${o},${r}`,f,m,p,w]}const Kt=N.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=X.Bottom,targetPosition:i=X.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:m,markerEnd:p,markerStart:w,pathOptions:y,interactionWidth:v})=>{const[g,E,A]=Ar({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:i,curvature:y?.curvature});return C.createElement(Dt,{path:g,labelX:E,labelY:A,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:f,style:m,markerEnd:p,markerStart:w,interactionWidth:v})});Kt.displayName="BezierEdge";const Gn=N.createContext(null),lu=Gn.Provider;Gn.Consumer;const uu=()=>N.useContext(Gn),du=e=>"id"in e&&"source"in e&&"target"in e,fu=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`reactflow__edge-${e}${t||""}-${n}${o||""}`,In=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,hu=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),mu=(e,t)=>{if(!e.source||!e.target)return t;let n;return du(e)?n={...e}:n={...e,id:fu(e)},hu(n,t)?t:t.concat(n)},Dn=({x:e,y:t},[n,o,r],i,[s,a])=>{const c={x:(e-n)/r,y:(t-o)/r};return i?{x:s*Math.round(c.x/s),y:a*Math.round(c.y/a)}:c},Mr=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),dt=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],o=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-o};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-o}:r}},Wn=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const{x:i,y:s}=dt(r,t).positionAbsolute;return eu(o,Xn({x:i,y:s,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return tu(n)},kr=(e,t,[n,o,r]=[0,0,1],i=!1,s=!1,a=[0,0])=>{const c={x:(t.x-n)/r,y:(t.y-o)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(l=>{const{width:f,height:m,selectable:p=!0,hidden:w=!1}=l;if(s&&!p||w)return!1;const{positionAbsolute:y}=dt(l,a),v={x:y.x,y:y.y,width:f||0,height:m||0},g=kn(c,v),E=typeof f>"u"||typeof m>"u"||f===null||m===null,A=i&&g>0,x=(f||0)*(m||0);(E||A||g>=x||l.dragging)&&u.push(l)}),u},Tr=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},jr=(e,t,n,o,r,i=.1)=>{const s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(s,a),u=gt(c,o,r),l=e.x+e.width/2,f=e.y+e.height/2,m=t/2-l*u,p=n/2-f*u;return{x:m,y:p,zoom:u}},Ge=(e,t=0)=>e.transition().duration(t);function No(e,t,n,o){return(t[n]||[]).reduce((r,i)=>(`${e.id}-${i.id}-${n}`!==o&&r.push({id:i.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+i.x+i.width/2,y:(e.positionAbsolute?.y??0)+i.y+i.height/2}),r),[])}function pu(e,t,n,o,r,i){const{x:s,y:a}=Ve(e),u=t.elementsFromPoint(s,a).find(w=>w.classList.contains("react-flow__handle"));if(u){const w=u.getAttribute("data-nodeid");if(w){const y=qn(void 0,u),v=u.getAttribute("data-handleid"),g=i({nodeId:w,id:v,type:y});if(g){const E=r.find(A=>A.nodeId===w&&A.type===y&&A.id===v);return{handle:{id:v,type:y,nodeId:w,x:E?.x||n.x,y:E?.y||n.y},validHandleResult:g}}}}let l=[],f=1/0;if(r.forEach(w=>{const y=Math.sqrt((w.x-n.x)**2+(w.y-n.y)**2);if(y<=o){const v=i(w);y<=f&&(y<f?l=[{handle:w,validHandleResult:v}]:y===f&&l.push({handle:w,validHandleResult:v}),f=y)}}),!l.length)return{handle:null,validHandleResult:Ir()};if(l.length===1)return l[0];const m=l.some(({validHandleResult:w})=>w.isValid),p=l.some(({handle:w})=>w.type==="target");return l.find(({handle:w,validHandleResult:y})=>p?w.type==="target":m?y.isValid:!0)||l[0]}const gu={source:null,target:null,sourceHandle:null,targetHandle:null},Ir=()=>({handleDomNode:null,isValid:!1,connection:gu,endHandle:null});function Dr(e,t,n,o,r,i,s){const a=r==="target",c=s.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),u={...Ir(),handleDomNode:c};if(c){const l=qn(void 0,c),f=c.getAttribute("data-nodeid"),m=c.getAttribute("data-handleid"),p=c.classList.contains("connectable"),w=c.classList.contains("connectableend"),y={source:a?f:n,sourceHandle:a?m:o,target:a?n:f,targetHandle:a?o:m};u.connection=y,p&&w&&(t===Ke.Strict?a&&l==="source"||!a&&l==="target":f!==n||m!==o)&&(u.endHandle={nodeId:f,handleId:m,type:l},u.isValid=i(y))}return u}function yu({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((r,i)=>{if(i[oe]){const{handleBounds:s}=i[oe];let a=[],c=[];s&&(a=No(i,s,"source",`${t}-${n}-${o}`),c=No(i,s,"target",`${t}-${n}-${o}`)),r.push(...a,...c)}return r},[])}function qn(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function xn(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function xu(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function $r({event:e,handleId:t,nodeId:n,onConnect:o,isTarget:r,getState:i,setState:s,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:u}){const l=br(e.target),{connectionMode:f,domNode:m,autoPanOnConnect:p,connectionRadius:w,onConnectStart:y,panBy:v,getNodes:g,cancelConnection:E}=i();let A=0,x;const{x:k,y:T}=Ve(e),V=l?.elementFromPoint(k,T),P=qn(c,V),I=m?.getBoundingClientRect();if(!I||!P)return;let H,B=Ve(e,I),O=!1,R=null,h=!1,_=null;const b=yu({nodes:g(),nodeId:n,handleId:t,handleType:P}),M=()=>{if(!p)return;const[j,D]=vr(B,I);v({x:j,y:D}),A=requestAnimationFrame(M)};s({connectionPosition:B,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:P,connectionStartHandle:{nodeId:n,handleId:t,type:P},connectionEndHandle:null}),y?.(e,{nodeId:n,handleId:t,handleType:P});function $(j){const{transform:D}=i();B=Ve(j,I);const{handle:z,validHandleResult:F}=pu(j,l,Dn(B,D,!1,[1,1]),w,b,L=>Dr(L,f,n,t,r?"target":"source",a,l));if(x=z,O||(M(),O=!0),_=F.handleDomNode,R=F.connection,h=F.isValid,s({connectionPosition:x&&h?Mr({x:x.x,y:x.y},D):B,connectionStatus:xu(!!x,h),connectionEndHandle:F.endHandle}),!x&&!h&&!_)return xn(H);R.source!==R.target&&_&&(xn(H),H=_,_.classList.add("connecting","react-flow__handle-connecting"),_.classList.toggle("valid",h),_.classList.toggle("react-flow__handle-valid",h))}function S(j){(x||_)&&R&&h&&o?.(R),i().onConnectEnd?.(j),c&&u?.(j),xn(H),E(),cancelAnimationFrame(A),O=!1,h=!1,R=null,_=null,l.removeEventListener("mousemove",$),l.removeEventListener("mouseup",S),l.removeEventListener("touchmove",$),l.removeEventListener("touchend",S)}l.addEventListener("mousemove",$),l.addEventListener("mouseup",S),l.addEventListener("touchmove",$),l.addEventListener("touchend",S)}const _o=()=>!0,wu=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),vu=(e,t,n)=>o=>{const{connectionStartHandle:r,connectionEndHandle:i,connectionClickStartHandle:s}=o;return{connecting:r?.nodeId===e&&r?.handleId===t&&r?.type===n||i?.nodeId===e&&i?.handleId===t&&i?.type===n,clickConnecting:s?.nodeId===e&&s?.handleId===t&&s?.type===n}},zr=N.forwardRef(({type:e="source",position:t=X.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:c,className:u,onMouseDown:l,onTouchStart:f,...m},p)=>{const w=s||null,y=e==="target",v=se(),g=uu(),{connectOnClick:E,noPanClassName:A}=Q(wu,ae),{connecting:x,clickConnecting:k}=Q(vu(g,w,e),ae);g||v.getState().onError?.("010",Ie.error010());const T=I=>{const{defaultEdgeOptions:H,onConnect:B,hasDefaultEdges:O}=v.getState(),R={...H,...I};if(O){const{edges:h,setEdges:_}=v.getState();_(mu(R,h))}B?.(R),a?.(R)},V=I=>{if(!g)return;const H=Er(I);r&&(H&&I.button===0||!H)&&$r({event:I,handleId:w,nodeId:g,onConnect:T,isTarget:y,getState:v.getState,setState:v.setState,isValidConnection:n||v.getState().isValidConnection||_o}),H?l?.(I):f?.(I)},P=I=>{const{onClickConnectStart:H,onClickConnectEnd:B,connectionClickStartHandle:O,connectionMode:R,isValidConnection:h}=v.getState();if(!g||!O&&!r)return;if(!O){H?.(I,{nodeId:g,handleId:w,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:g,type:e,handleId:w}});return}const _=br(I.target),b=n||h||_o,{connection:M,isValid:$}=Dr({nodeId:g,id:w,type:e},R,O.nodeId,O.handleId||null,O.type,b,_);$&&T(M),B?.(I),v.setState({connectionClickStartHandle:null})};return C.createElement("div",{"data-handleid":w,"data-nodeid":g,"data-handlepos":t,"data-id":`${g}-${w}-${e}`,className:ce(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",A,u,{source:!y,target:y,connectable:o,connectablestart:r,connectableend:i,connecting:k,connectionindicator:o&&(r&&!x||i&&x)}]),onMouseDown:V,onTouchStart:V,onClick:E?P:void 0,ref:p,...m},c)});zr.displayName="Handle";var Jt=N.memo(zr);const Pr=({data:e,isConnectable:t,targetPosition:n=X.Top,sourcePosition:o=X.Bottom})=>C.createElement(C.Fragment,null,C.createElement(Jt,{type:"target",position:n,isConnectable:t}),e?.label,C.createElement(Jt,{type:"source",position:o,isConnectable:t}));Pr.displayName="DefaultNode";var $n=N.memo(Pr);const Rr=({data:e,isConnectable:t,sourcePosition:n=X.Bottom})=>C.createElement(C.Fragment,null,e?.label,C.createElement(Jt,{type:"source",position:n,isConnectable:t}));Rr.displayName="InputNode";var Vr=N.memo(Rr);const Hr=({data:e,isConnectable:t,targetPosition:n=X.Top})=>C.createElement(C.Fragment,null,C.createElement(Jt,{type:"target",position:n,isConnectable:t}),e?.label);Hr.displayName="OutputNode";var Br=N.memo(Hr);const Kn=()=>null;Kn.displayName="GroupNode";const bu=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Vt=e=>e.id;function Su(e,t){return ae(e.selectedNodes.map(Vt),t.selectedNodes.map(Vt))&&ae(e.selectedEdges.map(Vt),t.selectedEdges.map(Vt))}const Or=N.memo(({onSelectionChange:e})=>{const t=se(),{selectedNodes:n,selectedEdges:o}=Q(bu,Su);return N.useEffect(()=>{const r={nodes:n,edges:o};e?.(r),t.getState().onSelectionChange.forEach(i=>i(r))},[n,o,e]),null});Or.displayName="SelectionListener";const Eu=e=>!!e.onSelectionChange;function Nu({onSelectionChange:e}){const t=Q(Eu);return e||t?C.createElement(Or,{onSelectionChange:e}):null}const _u=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function rt(e,t){N.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function U(e,t,n){N.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Cu=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:i,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:l,nodesFocusable:f,edgesFocusable:m,edgesUpdatable:p,elevateNodesOnSelect:w,minZoom:y,maxZoom:v,nodeExtent:g,onNodesChange:E,onEdgesChange:A,elementsSelectable:x,connectionMode:k,snapGrid:T,snapToGrid:V,translateExtent:P,connectOnClick:I,defaultEdgeOptions:H,fitView:B,fitViewOptions:O,onNodesDelete:R,onEdgesDelete:h,onNodeDrag:_,onNodeDragStart:b,onNodeDragStop:M,onSelectionDrag:$,onSelectionDragStart:S,onSelectionDragStop:j,noPanClassName:D,nodeOrigin:z,rfId:F,autoPanOnConnect:L,autoPanOnNodeDrag:Z,onError:G,connectionRadius:W,isValidConnection:q,nodeDragThreshold:ee})=>{const{setNodes:K,setEdges:me,setDefaultNodesAndEdges:de,setMinZoom:pe,setMaxZoom:fe,setTranslateExtent:re,setNodeExtent:Ee,reset:J}=Q(_u,ae),Y=se();return N.useEffect(()=>{const le=o?.map(He=>({...He,...H}));return de(n,le),()=>{J()}},[]),U("defaultEdgeOptions",H,Y.setState),U("connectionMode",k,Y.setState),U("onConnect",r,Y.setState),U("onConnectStart",i,Y.setState),U("onConnectEnd",s,Y.setState),U("onClickConnectStart",a,Y.setState),U("onClickConnectEnd",c,Y.setState),U("nodesDraggable",u,Y.setState),U("nodesConnectable",l,Y.setState),U("nodesFocusable",f,Y.setState),U("edgesFocusable",m,Y.setState),U("edgesUpdatable",p,Y.setState),U("elementsSelectable",x,Y.setState),U("elevateNodesOnSelect",w,Y.setState),U("snapToGrid",V,Y.setState),U("snapGrid",T,Y.setState),U("onNodesChange",E,Y.setState),U("onEdgesChange",A,Y.setState),U("connectOnClick",I,Y.setState),U("fitViewOnInit",B,Y.setState),U("fitViewOnInitOptions",O,Y.setState),U("onNodesDelete",R,Y.setState),U("onEdgesDelete",h,Y.setState),U("onNodeDrag",_,Y.setState),U("onNodeDragStart",b,Y.setState),U("onNodeDragStop",M,Y.setState),U("onSelectionDrag",$,Y.setState),U("onSelectionDragStart",S,Y.setState),U("onSelectionDragStop",j,Y.setState),U("noPanClassName",D,Y.setState),U("nodeOrigin",z,Y.setState),U("rfId",F,Y.setState),U("autoPanOnConnect",L,Y.setState),U("autoPanOnNodeDrag",Z,Y.setState),U("onError",G,Y.setState),U("connectionRadius",W,Y.setState),U("isValidConnection",q,Y.setState),U("nodeDragThreshold",ee,Y.setState),rt(e,K),rt(t,me),rt(y,pe),rt(v,fe),rt(P,re),rt(g,Ee),null},Co={display:"none"},Au={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Lr="react-flow__node-desc",Fr="react-flow__edge-desc",Mu="react-flow__aria-live",ku=e=>e.ariaLiveMessage;function Tu({rfId:e}){const t=Q(ku);return C.createElement("div",{id:`${Mu}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Au},t)}function ju({rfId:e,disableKeyboardA11y:t}){return C.createElement(C.Fragment,null,C.createElement("div",{id:`${Lr}-${e}`,style:Co},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),C.createElement("div",{id:`${Fr}-${e}`,style:Co},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&C.createElement(Tu,{rfId:e}))}var jt=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,o]=N.useState(!1),r=N.useRef(!1),i=N.useRef(new Set([])),[s,a]=N.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),l=u.reduce((f,m)=>f.concat(...m),[]);return[u,l]}return[[],[]]},[e]);return N.useEffect(()=>{const c=typeof document<"u"?document:null,u=t?.target||c;if(e!==null){const l=p=>{if(r.current=p.ctrlKey||p.metaKey||p.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&Tn(p))return!1;const y=Mo(p.code,a);i.current.add(p[y]),Ao(s,i.current,!1)&&(p.preventDefault(),o(!0))},f=p=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&Tn(p))return!1;const y=Mo(p.code,a);Ao(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(p[y]),p.key==="Meta"&&i.current.clear(),r.current=!1},m=()=>{i.current.clear(),o(!1)};return u?.addEventListener("keydown",l),u?.addEventListener("keyup",f),window.addEventListener("blur",m),()=>{u?.removeEventListener("keydown",l),u?.removeEventListener("keyup",f),window.removeEventListener("blur",m)}}},[e,o]),n};function Ao(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function Mo(e,t){return t.includes(e)?"code":"key"}function Xr(e,t,n,o){const r=e.parentNode||e.parentId;if(!r)return n;const i=t.get(r),s=dt(i,o);return Xr(i,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(i[oe]?.z??0)>(n.z??0)?i[oe]?.z??0:n.z??0},o)}function Yr(e,t,n){e.forEach(o=>{const r=o.parentNode||o.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n?.[o.id]){const{x:i,y:s,z:a}=Xr(o,e,{...o.position,z:o[oe]?.z??0},t);o.positionAbsolute={x:i,y:s},o[oe].z=a,n?.[o.id]&&(o[oe].isParent=!0)}})}function wn(e,t,n,o){const r=new Map,i={},s=o?1e3:0;return e.forEach(a=>{const c=(he(a.zIndex)?a.zIndex:0)+(a.selected?s:0),u=t.get(a.id),l={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(i[f]=!0);const m=u?.type&&u?.type!==a.type;Object.defineProperty(l,oe,{enumerable:!1,value:{handleBounds:m?void 0:u?.[oe]?.handleBounds,z:c}}),r.set(a.id,l)}),Yr(r,n,i),r}function Zr(e,t={}){const{getNodes:n,width:o,height:r,minZoom:i,maxZoom:s,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:l,nodeOrigin:f}=e(),m=t.initial&&!u&&l;if(a&&c&&(m||!t.initial)){const w=n().filter(v=>{const g=t.includeHiddenNodes?v.width&&v.height:!v.hidden;return t.nodes?.length?g&&t.nodes.some(E=>E.id===v.id):g}),y=w.every(v=>v.width&&v.height);if(w.length>0&&y){const v=Wn(w,f),{x:g,y:E,zoom:A}=jr(v,o,r,t.minZoom??i,t.maxZoom??s,t.padding??.1),x=Re.translate(g,E).scale(A);return typeof t.duration=="number"&&t.duration>0?a.transform(Ge(c,t.duration),x):a.transform(c,x),!0}}return!1}function Iu(e,t){return e.forEach(n=>{const o=t.get(n.id);o&&t.set(o.id,{...o,[oe]:o[oe],selected:n.selected})}),new Map(t)}function Du(e,t){return t.map(n=>{const o=e.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function Ht({changedNodes:e,changedEdges:t,get:n,set:o}){const{nodeInternals:r,edges:i,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e?.length&&(c&&o({nodeInternals:Iu(e,r)}),s?.(e)),t?.length&&(u&&o({edges:Du(t,i)}),a?.(t))}const st=()=>{},$u={zoomIn:st,zoomOut:st,zoomTo:st,getZoom:()=>1,setViewport:st,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:st,fitBounds:st,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},zu=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Pu=()=>{const e=se(),{d3Zoom:t,d3Selection:n}=Q(zu,ae);return N.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(Ge(n,r?.duration),1.2),zoomOut:r=>t.scaleBy(Ge(n,r?.duration),1/1.2),zoomTo:(r,i)=>t.scaleTo(Ge(n,i?.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{const[s,a,c]=e.getState().transform,u=Re.translate(r.x??s,r.y??a).scale(r.zoom??c);t.transform(Ge(n,i?.duration),u)},getViewport:()=>{const[r,i,s]=e.getState().transform;return{x:r,y:i,zoom:s}},fitView:r=>Zr(e.getState,r),setCenter:(r,i,s)=>{const{width:a,height:c,maxZoom:u}=e.getState(),l=typeof s?.zoom<"u"?s.zoom:u,f=a/2-r*l,m=c/2-i*l,p=Re.translate(f,m).scale(l);t.transform(Ge(n,s?.duration),p)},fitBounds:(r,i)=>{const{width:s,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:l,y:f,zoom:m}=jr(r,s,a,c,u,i?.padding??.1),p=Re.translate(l,f).scale(m);t.transform(Ge(n,i?.duration),p)},project:r=>{const{transform:i,snapToGrid:s,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Dn(r,i,s,a)},screenToFlowPosition:r=>{const{transform:i,snapToGrid:s,snapGrid:a,domNode:c}=e.getState();if(!c)return r;const{x:u,y:l}=c.getBoundingClientRect(),f={x:r.x-u,y:r.y-l};return Dn(f,i,s,a)},flowToScreenPosition:r=>{const{transform:i,domNode:s}=e.getState();if(!s)return r;const{x:a,y:c}=s.getBoundingClientRect(),u=Mr(r,i);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:$u,[t,n])};function Jn(){const e=Pu(),t=se(),n=N.useCallback(()=>t.getState().getNodes().map(y=>({...y})),[]),o=N.useCallback(y=>t.getState().nodeInternals.get(y),[]),r=N.useCallback(()=>{const{edges:y=[]}=t.getState();return y.map(v=>({...v}))},[]),i=N.useCallback(y=>{const{edges:v=[]}=t.getState();return v.find(g=>g.id===y)},[]),s=N.useCallback(y=>{const{getNodes:v,setNodes:g,hasDefaultNodes:E,onNodesChange:A}=t.getState(),x=v(),k=typeof y=="function"?y(x):y;if(E)g(k);else if(A){const T=k.length===0?x.map(V=>({type:"remove",id:V.id})):k.map(V=>({item:V,type:"reset"}));A(T)}},[]),a=N.useCallback(y=>{const{edges:v=[],setEdges:g,hasDefaultEdges:E,onEdgesChange:A}=t.getState(),x=typeof y=="function"?y(v):y;if(E)g(x);else if(A){const k=x.length===0?v.map(T=>({type:"remove",id:T.id})):x.map(T=>({item:T,type:"reset"}));A(k)}},[]),c=N.useCallback(y=>{const v=Array.isArray(y)?y:[y],{getNodes:g,setNodes:E,hasDefaultNodes:A,onNodesChange:x}=t.getState();if(A){const T=[...g(),...v];E(T)}else if(x){const k=v.map(T=>({item:T,type:"add"}));x(k)}},[]),u=N.useCallback(y=>{const v=Array.isArray(y)?y:[y],{edges:g=[],setEdges:E,hasDefaultEdges:A,onEdgesChange:x}=t.getState();if(A)E([...g,...v]);else if(x){const k=v.map(T=>({item:T,type:"add"}));x(k)}},[]),l=N.useCallback(()=>{const{getNodes:y,edges:v=[],transform:g}=t.getState(),[E,A,x]=g;return{nodes:y().map(k=>({...k})),edges:v.map(k=>({...k})),viewport:{x:E,y:A,zoom:x}}},[]),f=N.useCallback(({nodes:y,edges:v})=>{const{nodeInternals:g,getNodes:E,edges:A,hasDefaultNodes:x,hasDefaultEdges:k,onNodesDelete:T,onEdgesDelete:V,onNodesChange:P,onEdgesChange:I}=t.getState(),H=(y||[]).map(_=>_.id),B=(v||[]).map(_=>_.id),O=E().reduce((_,b)=>{const M=b.parentNode||b.parentId,$=!H.includes(b.id)&&M&&_.find(j=>j.id===M);return(typeof b.deletable=="boolean"?b.deletable:!0)&&(H.includes(b.id)||$)&&_.push(b),_},[]),R=A.filter(_=>typeof _.deletable=="boolean"?_.deletable:!0),h=R.filter(_=>B.includes(_.id));if(O||h){const _=Tr(O,R),b=[...h,..._],M=b.reduce(($,S)=>($.includes(S.id)||$.push(S.id),$),[]);if((k||x)&&(k&&t.setState({edges:A.filter($=>!M.includes($.id))}),x&&(O.forEach($=>{g.delete($.id)}),t.setState({nodeInternals:new Map(g)}))),M.length>0&&(V?.(b),I&&I(M.map($=>({id:$,type:"remove"})))),O.length>0&&(T?.(O),P)){const $=O.map(S=>({id:S.id,type:"remove"}));P($)}}},[]),m=N.useCallback(y=>{const v=nu(y),g=v?null:t.getState().nodeInternals.get(y.id);return!v&&!g?[null,null,v]:[v?y:wo(g),g,v]},[]),p=N.useCallback((y,v=!0,g)=>{const[E,A,x]=m(y);return E?(g||t.getState().getNodes()).filter(k=>{if(!x&&(k.id===A.id||!k.positionAbsolute))return!1;const T=wo(k),V=kn(T,E);return v&&V>0||V>=E.width*E.height}):[]},[]),w=N.useCallback((y,v,g=!0)=>{const[E]=m(y);if(!E)return!1;const A=kn(E,v);return g&&A>0||A>=E.width*E.height},[]);return N.useMemo(()=>({...e,getNodes:n,getNode:o,getEdges:r,getEdge:i,setNodes:s,setEdges:a,addNodes:c,addEdges:u,toObject:l,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:w}),[e,n,o,r,i,s,a,c,u,l,f,p,w])}const Ru={actInsideInputWithModifier:!1};var Vu=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=se(),{deleteElements:o}=Jn(),r=jt(e,Ru),i=jt(t);N.useEffect(()=>{if(r){const{edges:s,getNodes:a}=n.getState(),c=a().filter(l=>l.selected),u=s.filter(l=>l.selected);o({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),N.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function Hu(e){const t=se();N.useEffect(()=>{let n;const o=()=>{if(!e.current)return;const r=Ln(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",Ie.error004()),t.setState({width:r.width||500,height:r.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver(()=>o()),n.observe(e.current)),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}},[])}const Qn={position:"absolute",width:"100%",height:"100%",top:0,left:0},Bu=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Bt=e=>({x:e.x,y:e.y,zoom:e.k}),it=(e,t)=>e.target.closest(`.${t}`),ko=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),To=e=>{const t=e.ctrlKey&&qt()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Ou=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Lu=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=We.Free,zoomOnDoubleClick:u=!0,elementsSelectable:l,panOnDrag:f=!0,defaultViewport:m,translateExtent:p,minZoom:w,maxZoom:y,zoomActivationKeyCode:v,preventScrolling:g=!0,children:E,noWheelClassName:A,noPanClassName:x})=>{const k=N.useRef(),T=se(),V=N.useRef(!1),P=N.useRef(!1),I=N.useRef(null),H=N.useRef({x:0,y:0,zoom:0}),{d3Zoom:B,d3Selection:O,d3ZoomHandler:R,userSelectionActive:h}=Q(Ou,ae),_=jt(v),b=N.useRef(0),M=N.useRef(!1),$=N.useRef();return Hu(I),N.useEffect(()=>{if(I.current){const S=I.current.getBoundingClientRect(),j=Gl().scaleExtent([w,y]).translateExtent(p),D=ve(I.current).call(j),z=Re.translate(m.x,m.y).scale(gt(m.zoom,w,y)),F=[[0,0],[S.width,S.height]],L=j.constrain()(z,F,p);j.transform(D,L),j.wheelDelta(To),T.setState({d3Zoom:j,d3Selection:D,d3ZoomHandler:D.on("wheel.zoom"),transform:[L.x,L.y,L.k],domNode:I.current.closest(".react-flow")})}},[]),N.useEffect(()=>{O&&B&&(s&&!_&&!h?O.on("wheel.zoom",S=>{if(it(S,A))return!1;S.preventDefault(),S.stopImmediatePropagation();const j=O.property("__zoom").k||1;if(S.ctrlKey&&i){const q=Ce(S),ee=To(S),K=j*Math.pow(2,ee);B.scaleTo(O,K,q,S);return}const D=S.deltaMode===1?20:1;let z=c===We.Vertical?0:S.deltaX*D,F=c===We.Horizontal?0:S.deltaY*D;!qt()&&S.shiftKey&&c!==We.Vertical&&(z=S.deltaY*D,F=0),B.translateBy(O,-(z/j)*a,-(F/j)*a,{internal:!0});const L=Bt(O.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:G,onViewportChangeEnd:W}=T.getState();clearTimeout($.current),M.current||(M.current=!0,t?.(S,L),Z?.(L)),M.current&&(e?.(S,L),G?.(L),$.current=setTimeout(()=>{n?.(S,L),W?.(L),M.current=!1},150))},{passive:!1}):typeof R<"u"&&O.on("wheel.zoom",function(S,j){if(!g&&S.type==="wheel"&&!S.ctrlKey||it(S,A))return null;S.preventDefault(),R.call(this,S,j)},{passive:!1}))},[h,s,c,O,B,R,_,i,g,A,t,e,n]),N.useEffect(()=>{B&&B.on("start",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;b.current=S.sourceEvent?.button;const{onViewportChangeStart:j}=T.getState(),D=Bt(S.transform);V.current=!0,H.current=D,S.sourceEvent?.type==="mousedown"&&T.setState({paneDragging:!0}),j?.(D),t?.(S.sourceEvent,D)})},[B,t]),N.useEffect(()=>{B&&(h&&!V.current?B.on("zoom",null):h||B.on("zoom",S=>{const{onViewportChange:j}=T.getState();if(T.setState({transform:[S.transform.x,S.transform.y,S.transform.k]}),P.current=!!(o&&ko(f,b.current??0)),(e||j)&&!S.sourceEvent?.internal){const D=Bt(S.transform);j?.(D),e?.(S.sourceEvent,D)}}))},[h,B,e,f,o]),N.useEffect(()=>{B&&B.on("end",S=>{if(!S.sourceEvent||S.sourceEvent.internal)return null;const{onViewportChangeEnd:j}=T.getState();if(V.current=!1,T.setState({paneDragging:!1}),o&&ko(f,b.current??0)&&!P.current&&o(S.sourceEvent),P.current=!1,(n||j)&&Bu(H.current,S.transform)){const D=Bt(S.transform);H.current=D,clearTimeout(k.current),k.current=setTimeout(()=>{j?.(D),n?.(S.sourceEvent,D)},s?150:0)}})},[B,s,f,n,o]),N.useEffect(()=>{B&&B.filter(S=>{const j=_||r,D=i&&S.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&S.button===1&&S.type==="mousedown"&&(it(S,"react-flow__node")||it(S,"react-flow__edge")))return!0;if(!f&&!j&&!s&&!u&&!i||h||!u&&S.type==="dblclick"||it(S,A)&&S.type==="wheel"||it(S,x)&&(S.type!=="wheel"||s&&S.type==="wheel"&&!_)||!i&&S.ctrlKey&&S.type==="wheel"||!j&&!s&&!D&&S.type==="wheel"||!f&&(S.type==="mousedown"||S.type==="touchstart")||Array.isArray(f)&&!f.includes(S.button)&&S.type==="mousedown")return!1;const z=Array.isArray(f)&&f.includes(S.button)||!S.button||S.button<=1;return(!S.ctrlKey||S.type==="wheel")&&z})},[h,B,r,i,s,u,f,l,_]),C.createElement("div",{className:"react-flow__renderer",ref:I,style:Qn},E)},Fu=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Xu(){const{userSelectionActive:e,userSelectionRect:t}=Q(Fu,ae);return e&&t?C.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function jo(e,t){const n=t.parentNode||t.parentId,o=e.find(r=>r.id===n);if(o){const r=t.position.x+t.width-o.width,i=t.position.y+t.height-o.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,r>0&&(o.style.width+=r),i>0&&(o.style.height+=i),t.position.x<0){const s=Math.abs(t.position.x);o.position.x=o.position.x-s,o.style.width+=s,t.position.x=0}if(t.position.y<0){const s=Math.abs(t.position.y);o.position.y=o.position.y-s,o.style.height+=s,t.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function Yu(e,t){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const n=e.filter(o=>o.type==="add").map(o=>o.item);return t.reduce((o,r)=>{const i=e.filter(a=>a.id===r.id);if(i.length===0)return o.push(r),o;const s={...r};for(const a of i)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&jo(o,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&jo(o,s);break}case"remove":return o}return o.push(s),o},n)}function Zu(e,t){return Yu(e,t)}const $e=(e,t)=>({id:e,type:"select",selected:t});function ct(e,t){return e.reduce((n,o)=>{const r=t.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push($e(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push($e(o.id,!1))),n},[])}const vn=(e,t)=>n=>{n.target===t.current&&e?.(n)},Uu=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Ur=N.memo(({isSelecting:e,selectionMode:t=Tt.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:l,children:f})=>{const m=N.useRef(null),p=se(),w=N.useRef(0),y=N.useRef(0),v=N.useRef(),{userSelectionActive:g,elementsSelectable:E,dragging:A}=Q(Uu,ae),x=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,y.current=0},k=R=>{i?.(R),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},T=R=>{if(Array.isArray(n)&&n?.includes(2)){R.preventDefault();return}s?.(R)},V=a?R=>a(R):void 0,P=R=>{const{resetSelectedElements:h,domNode:_}=p.getState();if(v.current=_?.getBoundingClientRect(),!E||!e||R.button!==0||R.target!==m.current||!v.current)return;const{x:b,y:M}=Ve(R,v.current);h(),p.setState({userSelectionRect:{width:0,height:0,startX:b,startY:M,x:b,y:M}}),o?.(R)},I=R=>{const{userSelectionRect:h,nodeInternals:_,edges:b,transform:M,onNodesChange:$,onEdgesChange:S,nodeOrigin:j,getNodes:D}=p.getState();if(!e||!v.current||!h)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const z=Ve(R,v.current),F=h.startX??0,L=h.startY??0,Z={...h,x:z.x<F?z.x:F,y:z.y<L?z.y:L,width:Math.abs(z.x-F),height:Math.abs(z.y-L)},G=D(),W=kr(_,Z,M,t===Tt.Partial,!0,j),q=Tr(W,b).map(K=>K.id),ee=W.map(K=>K.id);if(w.current!==ee.length){w.current=ee.length;const K=ct(G,ee);K.length&&$?.(K)}if(y.current!==q.length){y.current=q.length;const K=ct(b,q);K.length&&S?.(K)}p.setState({userSelectionRect:Z})},H=R=>{if(R.button!==0)return;const{userSelectionRect:h}=p.getState();!g&&h&&R.target===m.current&&k?.(R),p.setState({nodesSelectionActive:w.current>0}),x(),r?.(R)},B=R=>{g&&(p.setState({nodesSelectionActive:w.current>0}),r?.(R)),x()},O=E&&(e||g);return C.createElement("div",{className:ce(["react-flow__pane",{dragging:A,selection:e}]),onClick:O?void 0:vn(k,m),onContextMenu:vn(T,m),onWheel:vn(V,m),onMouseEnter:O?void 0:c,onMouseDown:O?P:void 0,onMouseMove:O?I:u,onMouseUp:O?H:void 0,onMouseLeave:O?B:l,ref:m,style:Qn},f,C.createElement(Xu,null))});Ur.displayName="Pane";function Gr(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const o=t.get(n);return o?o.selected?!0:Gr(o,t):!1}function Io(e,t,n){let o=e;do{if(o?.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Gu(e,t,n,o){return Array.from(e.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||r.parentId||!Gr(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>({id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(r.positionAbsolute?.x??0),y:n.y-(r.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}))}function Wu(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Wr(e,t,n,o,r=[0,0],i){const s=Wu(e,e.extent||o);let a=s;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:m,y:p}=dt(f,r).positionAbsolute;a=f&&he(m)&&he(p)&&he(f.width)&&he(f.height)?[[m+e.width*r[0],p+e.height*r[1]],[m+f.width-e.width+e.width*r[0],p+f.height-e.height+e.height*r[1]]]:a}else i?.("005",Ie.error005()),a=s;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:m,y:p}=dt(f,r).positionAbsolute;a=[[e.extent[0][0]+m,e.extent[0][1]+p],[e.extent[1][0]+m,e.extent[1][1]+p]]}let u={x:0,y:0};if(c){const f=n.get(c);u=dt(f,r).positionAbsolute}const l=a&&a!=="parent"?Fn(t,a):t;return{position:{x:l.x-u.x,y:l.y-u.y},positionAbsolute:l}}function bn({nodeId:e,dragItems:t,nodeInternals:n}){const o=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?o.find(r=>r.id===e):o[0],o]}const Do=(e,t,n,o)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const i=Array.from(r),s=t.getBoundingClientRect(),a={x:s.width*o[0],y:s.height*o[1]};return i.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-s.left-a.x)/n,y:(u.top-s.top-a.y)/n,...Ln(c)}})};function Et(e,t,n){return n===void 0?n:o=>{const r=t().nodeInternals.get(e);r&&n(o,{...r})}}function zn({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c?.("012",Ie.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):r([e])}function qu(){const e=se();return N.useCallback(({sourceEvent:n})=>{const{transform:o,snapGrid:r,snapToGrid:i}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(s-o[0])/o[2],y:(a-o[1])/o[2]};return{xSnapped:i?r[0]*Math.round(c.x/r[0]):c.x,ySnapped:i?r[1]*Math.round(c.y/r[1]):c.y,...c}},[])}function Sn(e){return(t,n,o)=>e?.(t,o)}function qr({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,selectNodesOnDrag:s}){const a=se(),[c,u]=N.useState(!1),l=N.useRef([]),f=N.useRef({x:null,y:null}),m=N.useRef(0),p=N.useRef(null),w=N.useRef({x:0,y:0}),y=N.useRef(null),v=N.useRef(!1),g=N.useRef(!1),E=N.useRef(!1),A=qu();return N.useEffect(()=>{if(e?.current){const x=ve(e.current),k=({x:P,y:I})=>{const{nodeInternals:H,onNodeDrag:B,onSelectionDrag:O,updateNodePositions:R,nodeExtent:h,snapGrid:_,snapToGrid:b,nodeOrigin:M,onError:$}=a.getState();f.current={x:P,y:I};let S=!1,j={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&h){const z=Wn(l.current,M);j=Xn(z)}if(l.current=l.current.map(z=>{const F={x:P-z.distance.x,y:I-z.distance.y};b&&(F.x=_[0]*Math.round(F.x/_[0]),F.y=_[1]*Math.round(F.y/_[1]));const L=[[h[0][0],h[0][1]],[h[1][0],h[1][1]]];l.current.length>1&&h&&!z.extent&&(L[0][0]=z.positionAbsolute.x-j.x+h[0][0],L[1][0]=z.positionAbsolute.x+(z.width??0)-j.x2+h[1][0],L[0][1]=z.positionAbsolute.y-j.y+h[0][1],L[1][1]=z.positionAbsolute.y+(z.height??0)-j.y2+h[1][1]);const Z=Wr(z,F,H,L,M,$);return S=S||z.position.x!==Z.position.x||z.position.y!==Z.position.y,z.position=Z.position,z.positionAbsolute=Z.positionAbsolute,z}),!S)return;R(l.current,!0,!0),u(!0);const D=r?B:Sn(O);if(D&&y.current){const[z,F]=bn({nodeId:r,dragItems:l.current,nodeInternals:H});D(y.current,z,F)}},T=()=>{if(!p.current)return;const[P,I]=vr(w.current,p.current);if(P!==0||I!==0){const{transform:H,panBy:B}=a.getState();f.current.x=(f.current.x??0)-P/H[2],f.current.y=(f.current.y??0)-I/H[2],B({x:P,y:I})&&k(f.current)}m.current=requestAnimationFrame(T)},V=P=>{const{nodeInternals:I,multiSelectionActive:H,nodesDraggable:B,unselectNodesAndEdges:O,onNodeDragStart:R,onSelectionDragStart:h}=a.getState();g.current=!0;const _=r?R:Sn(h);(!s||!i)&&!H&&r&&(I.get(r)?.selected||O()),r&&i&&s&&zn({id:r,store:a,nodeRef:e});const b=A(P);if(f.current=b,l.current=Gu(I,B,b,r),_&&l.current){const[M,$]=bn({nodeId:r,dragItems:l.current,nodeInternals:I});_(P.sourceEvent,M,$)}};if(t)x.on(".drag",null);else{const P=Sc().on("start",I=>{const{domNode:H,nodeDragThreshold:B}=a.getState();B===0&&V(I),E.current=!1;const O=A(I);f.current=O,p.current=H?.getBoundingClientRect()||null,w.current=Ve(I.sourceEvent,p.current)}).on("drag",I=>{const H=A(I),{autoPanOnNodeDrag:B,nodeDragThreshold:O}=a.getState();if(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1&&(E.current=!0),!E.current){if(!v.current&&g.current&&B&&(v.current=!0,T()),!g.current){const R=H.xSnapped-(f?.current?.x??0),h=H.ySnapped-(f?.current?.y??0);Math.sqrt(R*R+h*h)>O&&V(I)}(f.current.x!==H.xSnapped||f.current.y!==H.ySnapped)&&l.current&&g.current&&(y.current=I.sourceEvent,w.current=Ve(I.sourceEvent,p.current),k(H))}}).on("end",I=>{if(!(!g.current||E.current)&&(u(!1),v.current=!1,g.current=!1,cancelAnimationFrame(m.current),l.current)){const{updateNodePositions:H,nodeInternals:B,onNodeDragStop:O,onSelectionDragStop:R}=a.getState(),h=r?O:Sn(R);if(H(l.current,!1,!1),h){const[_,b]=bn({nodeId:r,dragItems:l.current,nodeInternals:B});h(I.sourceEvent,_,b)}}}).filter(I=>{const H=I.target;return!I.button&&(!n||!Io(H,`.${n}`,e))&&(!o||Io(H,o,e))});return x.call(P),()=>{x.on(".drag",null)}}}},[e,t,n,o,i,a,r,s,A]),c}function Kr(){const e=se();return N.useCallback(n=>{const{nodeInternals:o,nodeExtent:r,updateNodePositions:i,getNodes:s,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:l}=e.getState(),f=s().filter(E=>E.selected&&(E.draggable||l&&typeof E.draggable>"u")),m=a?c[0]:5,p=a?c[1]:5,w=n.isShiftPressed?4:1,y=n.x*m*w,v=n.y*p*w,g=f.map(E=>{if(E.positionAbsolute){const A={x:E.positionAbsolute.x+y,y:E.positionAbsolute.y+v};a&&(A.x=c[0]*Math.round(A.x/c[0]),A.y=c[1]*Math.round(A.y/c[1]));const{positionAbsolute:x,position:k}=Wr(E,A,o,r,void 0,u);E.position=k,E.positionAbsolute=x}return E});i(g,!0,!1)},[])}const ft={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Nt=e=>{const t=({id:n,type:o,data:r,xPos:i,yPos:s,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:l,onMouseEnter:f,onMouseMove:m,onMouseLeave:p,onContextMenu:w,onDoubleClick:y,style:v,className:g,isDraggable:E,isSelectable:A,isConnectable:x,isFocusable:k,selectNodesOnDrag:T,sourcePosition:V,targetPosition:P,hidden:I,resizeObserver:H,dragHandle:B,zIndex:O,isParent:R,noDragClassName:h,noPanClassName:_,initialized:b,disableKeyboardA11y:M,ariaLabel:$,rfId:S,hasHandleBounds:j})=>{const D=se(),z=N.useRef(null),F=N.useRef(null),L=N.useRef(V),Z=N.useRef(P),G=N.useRef(o),W=A||E||l||f||m||p,q=Kr(),ee=Et(n,D.getState,f),K=Et(n,D.getState,m),me=Et(n,D.getState,p),de=Et(n,D.getState,w),pe=Et(n,D.getState,y),fe=J=>{const{nodeDragThreshold:Y}=D.getState();if(A&&(!T||!E||Y>0)&&zn({id:n,store:D,nodeRef:z}),l){const le=D.getState().nodeInternals.get(n);le&&l(J,{...le})}},re=J=>{if(!Tn(J)&&!M)if(Sr.includes(J.key)&&A){const Y=J.key==="Escape";zn({id:n,store:D,unselect:Y,nodeRef:z})}else E&&u&&Object.prototype.hasOwnProperty.call(ft,J.key)&&(D.setState({ariaLiveMessage:`Moved selected node ${J.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),q({x:ft[J.key].x,y:ft[J.key].y,isShiftPressed:J.shiftKey}))};N.useEffect(()=>()=>{F.current&&(H?.unobserve(F.current),F.current=null)},[]),N.useEffect(()=>{if(z.current&&!I){const J=z.current;(!b||!j||F.current!==J)&&(F.current&&H?.unobserve(F.current),H?.observe(J),F.current=J)}},[I,b,j]),N.useEffect(()=>{const J=G.current!==o,Y=L.current!==V,le=Z.current!==P;z.current&&(J||Y||le)&&(J&&(G.current=o),Y&&(L.current=V),le&&(Z.current=P),D.getState().updateNodeDimensions([{id:n,nodeElement:z.current,forceUpdate:!0}]))},[n,o,V,P]);const Ee=qr({nodeRef:z,disabled:I||!E,noDragClassName:h,handleSelector:B,nodeId:n,isSelectable:A,selectNodesOnDrag:T});return I?null:C.createElement("div",{className:ce(["react-flow__node",`react-flow__node-${o}`,{[_]:E},g,{selected:u,selectable:A,parent:R,dragging:Ee}]),ref:z,style:{zIndex:O,transform:`translate(${a}px,${c}px)`,pointerEvents:W?"all":"none",visibility:b?"visible":"hidden",...v},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ee,onMouseMove:K,onMouseLeave:me,onContextMenu:de,onClick:fe,onDoubleClick:pe,onKeyDown:k?re:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":M?void 0:`${Lr}-${S}`,"aria-label":$},C.createElement(lu,{value:n},C.createElement(e,{id:n,data:r,type:o,xPos:i,yPos:s,selected:u,isConnectable:x,sourcePosition:V,targetPosition:P,dragging:Ee,dragHandle:B,zIndex:O})))};return t.displayName="NodeWrapper",N.memo(t)};const Ku=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Wn(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Ju({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=se(),{width:r,height:i,x:s,y:a,transformString:c,userSelectionActive:u}=Q(Ku,ae),l=Kr(),f=N.useRef(null);if(N.useEffect(()=>{n||f.current?.focus({preventScroll:!0})},[n]),qr({nodeRef:f}),u||!r||!i)return null;const m=e?w=>{const y=o.getState().getNodes().filter(v=>v.selected);e(w,y)}:void 0,p=w=>{Object.prototype.hasOwnProperty.call(ft,w.key)&&l({x:ft[w.key].x,y:ft[w.key].y,isShiftPressed:w.shiftKey})};return C.createElement("div",{className:ce(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},C.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:r,height:i,top:a,left:s}}))}var Qu=N.memo(Ju);const ed=e=>e.nodesSelectionActive,Jr=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:l,selectionKeyCode:f,selectionOnDrag:m,selectionMode:p,onSelectionStart:w,onSelectionEnd:y,multiSelectionKeyCode:v,panActivationKeyCode:g,zoomActivationKeyCode:E,elementsSelectable:A,zoomOnScroll:x,zoomOnPinch:k,panOnScroll:T,panOnScrollSpeed:V,panOnScrollMode:P,zoomOnDoubleClick:I,panOnDrag:H,defaultViewport:B,translateExtent:O,minZoom:R,maxZoom:h,preventScrolling:_,onSelectionContextMenu:b,noWheelClassName:M,noPanClassName:$,disableKeyboardA11y:S})=>{const j=Q(ed),D=jt(f),z=jt(g),F=z||H,L=z||T,Z=D||m&&F!==!0;return Vu({deleteKeyCode:a,multiSelectionKeyCode:v}),C.createElement(Lu,{onMove:c,onMoveStart:u,onMoveEnd:l,onPaneContextMenu:i,elementsSelectable:A,zoomOnScroll:x,zoomOnPinch:k,panOnScroll:L,panOnScrollSpeed:V,panOnScrollMode:P,zoomOnDoubleClick:I,panOnDrag:!D&&F,defaultViewport:B,translateExtent:O,minZoom:R,maxZoom:h,zoomActivationKeyCode:E,preventScrolling:_,noWheelClassName:M,noPanClassName:$},C.createElement(Ur,{onSelectionStart:w,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:F,isSelecting:!!Z,selectionMode:p},e,j&&C.createElement(Qu,{onSelectionContextMenu:b,noPanClassName:$,disableKeyboardA11y:S})))};Jr.displayName="FlowRenderer";var td=N.memo(Jr);function nd(e){return Q(N.useCallback(n=>e?kr(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function od(e){const t={input:Nt(e.input||Vr),default:Nt(e.default||$n),output:Nt(e.output||Br),group:Nt(e.group||Kn)},n={},o=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,i)=>(r[i]=Nt(e[i]||$n),r),n);return{...t,...o}}const rd=({x:e,y:t,width:n,height:o,origin:r})=>!n||!o?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-o*r[1]},sd=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Qr=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:i,onError:s}=Q(sd,ae),a=nd(e.onlyRenderVisibleElements),c=N.useRef(),u=N.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(f=>{const m=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));i(m)});return c.current=l,l},[]);return N.useEffect(()=>()=>{c?.current?.disconnect()},[]),C.createElement("div",{className:"react-flow__nodes",style:Qn},a.map(l=>{let f=l.type||"default";e.nodeTypes[f]||(s?.("003",Ie.error003(f)),f="default");const m=e.nodeTypes[f]||e.nodeTypes.default,p=!!(l.draggable||t&&typeof l.draggable>"u"),w=!!(l.selectable||r&&typeof l.selectable>"u"),y=!!(l.connectable||n&&typeof l.connectable>"u"),v=!!(l.focusable||o&&typeof l.focusable>"u"),g=e.nodeExtent?Fn(l.positionAbsolute,e.nodeExtent):l.positionAbsolute,E=g?.x??0,A=g?.y??0,x=rd({x:E,y:A,width:l.width??0,height:l.height??0,origin:e.nodeOrigin});return C.createElement(m,{key:l.id,id:l.id,className:l.className,style:l.style,type:f,data:l.data,sourcePosition:l.sourcePosition||X.Bottom,targetPosition:l.targetPosition||X.Top,hidden:l.hidden,xPos:E,yPos:A,xPosOrigin:x.x,yPosOrigin:x.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!l.selected,isDraggable:p,isSelectable:w,isConnectable:y,isFocusable:v,resizeObserver:u,dragHandle:l.dragHandle,zIndex:l[oe]?.z??0,isParent:!!l[oe]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!l.width&&!!l.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:l.ariaLabel,hasHandleBounds:!!l[oe]?.handleBounds})}))};Qr.displayName="NodeRenderer";var id=N.memo(Qr);const ad=(e,t,n)=>n===X.Left?e-t:n===X.Right?e+t:e,cd=(e,t,n)=>n===X.Top?e-t:n===X.Bottom?e+t:e,$o="react-flow__edgeupdater",zo=({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:s,type:a})=>C.createElement("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:s,className:ce([$o,`${$o}-${a}`]),cx:ad(t,o,e),cy:cd(n,o,e),r:o,stroke:"transparent",fill:"transparent"}),ld=()=>!0;var at=e=>{const t=({id:n,className:o,type:r,data:i,onClick:s,onEdgeDoubleClick:a,selected:c,animated:u,label:l,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:w,labelBgBorderRadius:y,style:v,source:g,target:E,sourceX:A,sourceY:x,targetX:k,targetY:T,sourcePosition:V,targetPosition:P,elementsSelectable:I,hidden:H,sourceHandleId:B,targetHandleId:O,onContextMenu:R,onMouseEnter:h,onMouseMove:_,onMouseLeave:b,reconnectRadius:M,onReconnect:$,onReconnectStart:S,onReconnectEnd:j,markerEnd:D,markerStart:z,rfId:F,ariaLabel:L,isFocusable:Z,isReconnectable:G,pathOptions:W,interactionWidth:q,disableKeyboardA11y:ee})=>{const K=N.useRef(null),[me,de]=N.useState(!1),[pe,fe]=N.useState(!1),re=se(),Ee=N.useMemo(()=>`url('#${In(z,F)}')`,[z,F]),J=N.useMemo(()=>`url('#${In(D,F)}')`,[D,F]);if(H)return null;const Y=ie=>{const{edges:Ne,addSelectedEdges:Le,unselectNodesAndEdges:Fe,multiSelectionActive:ot}=re.getState(),_e=Ne.find(Xe=>Xe.id===n);_e&&(I&&(re.setState({nodesSelectionActive:!1}),_e.selected&&ot?(Fe({nodes:[],edges:[_e]}),K.current?.blur()):Le([n])),s&&s(ie,_e))},le=St(n,re.getState,a),He=St(n,re.getState,R),yt=St(n,re.getState,h),Je=St(n,re.getState,_),Qe=St(n,re.getState,b),Me=(ie,Ne)=>{if(ie.button!==0)return;const{edges:Le,isValidConnection:Fe}=re.getState(),ot=Ne?E:g,_e=(Ne?O:B)||null,Xe=Ne?"target":"source",un=Fe||ld,dn=Ne,wt=Le.find(Ye=>Ye.id===n);fe(!0),S?.(ie,wt,Xe);const fn=Ye=>{fe(!1),j?.(Ye,wt,Xe)};$r({event:ie,handleId:_e,nodeId:ot,onConnect:Ye=>$?.(wt,Ye),isTarget:dn,getState:re.getState,setState:re.setState,isValidConnection:un,edgeUpdaterType:Xe,onReconnectEnd:fn})},et=ie=>Me(ie,!0),Be=ie=>Me(ie,!1),Oe=()=>de(!0),tt=()=>de(!1),nt=!I&&!s,xt=ie=>{if(!ee&&Sr.includes(ie.key)&&I){const{unselectNodesAndEdges:Ne,addSelectedEdges:Le,edges:Fe}=re.getState();ie.key==="Escape"?(K.current?.blur(),Ne({edges:[Fe.find(_e=>_e.id===n)]})):Le([n])}};return C.createElement("g",{className:ce(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:c,animated:u,inactive:nt,updating:me}]),onClick:Y,onDoubleClick:le,onContextMenu:He,onMouseEnter:yt,onMouseMove:Je,onMouseLeave:Qe,onKeyDown:Z?xt:void 0,tabIndex:Z?0:void 0,role:Z?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":L===null?void 0:L||`Edge from ${g} to ${E}`,"aria-describedby":Z?`${Fr}-${F}`:void 0,ref:K},!pe&&C.createElement(e,{id:n,source:g,target:E,selected:c,animated:u,label:l,labelStyle:f,labelShowBg:m,labelBgStyle:p,labelBgPadding:w,labelBgBorderRadius:y,data:i,style:v,sourceX:A,sourceY:x,targetX:k,targetY:T,sourcePosition:V,targetPosition:P,sourceHandleId:B,targetHandleId:O,markerStart:Ee,markerEnd:J,pathOptions:W,interactionWidth:q}),G&&C.createElement(C.Fragment,null,(G==="source"||G===!0)&&C.createElement(zo,{position:V,centerX:A,centerY:x,radius:M,onMouseDown:et,onMouseEnter:Oe,onMouseOut:tt,type:"source"}),(G==="target"||G===!0)&&C.createElement(zo,{position:P,centerX:k,centerY:T,radius:M,onMouseDown:Be,onMouseEnter:Oe,onMouseOut:tt,type:"target"})))};return t.displayName="EdgeWrapper",N.memo(t)};function ud(e){const t={default:at(e.default||Kt),straight:at(e.bezier||Un),step:at(e.step||Zn),smoothstep:at(e.step||ln),simplebezier:at(e.simplebezier||Yn)},n={},o=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,i)=>(r[i]=at(e[i]||Kt),r),n);return{...t,...o}}function Po(e,t,n=null){const o=(n?.x||0)+t.x,r=(n?.y||0)+t.y,i=n?.width||t.width,s=n?.height||t.height;switch(e){case X.Top:return{x:o+i/2,y:r};case X.Right:return{x:o+i,y:r+s/2};case X.Bottom:return{x:o+i/2,y:r+s};case X.Left:return{x:o,y:r+s/2}}}function Ro(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const dd=(e,t,n,o,r,i)=>{const s=Po(n,e,t),a=Po(i,o,r);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function fd({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:s,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const l=Xn({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:s/c[2],height:a/c[2]}),f=Math.max(0,Math.min(l.x2,u.x2)-Math.max(l.x,u.x)),m=Math.max(0,Math.min(l.y2,u.y2)-Math.max(l.y,u.y));return Math.ceil(f*m)>0}function Vo(e){const t=e?.[oe]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const hd=[{level:0,isMaxLevel:!0,edges:[]}];function md(e,t,n=!1){let o=-1;const r=e.reduce((s,a)=>{const c=he(a.zIndex);let u=c?a.zIndex:0;if(n){const l=t.get(a.target),f=t.get(a.source),m=a.selected||l?.selected||f?.selected,p=Math.max(f?.[oe]?.z||0,l?.[oe]?.z||0,1e3);u=(c?a.zIndex:0)+(m?p:0)}return s[u]?s[u].push(a):s[u]=[a],o=u>o?u:o,s},{}),i=Object.entries(r).map(([s,a])=>{const c=+s;return{edges:a,level:c,isMaxLevel:c===o}});return i.length===0?hd:i}function pd(e,t,n){const o=Q(N.useCallback(r=>e?r.edges.filter(i=>{const s=t.get(i.source),a=t.get(i.target);return s?.width&&s?.height&&a?.width&&a?.height&&fd({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return md(o,t,n)}const gd=({color:e="none",strokeWidth:t=1})=>C.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),yd=({color:e="none",strokeWidth:t=1})=>C.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Ho={[te.Arrow]:gd,[te.ArrowClosed]:yd};function xd(e){const t=se();return N.useMemo(()=>Object.prototype.hasOwnProperty.call(Ho,e)?Ho[e]:(t.getState().onError?.("009",Ie.error009(e)),null),[e])}const wd=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const c=xd(t);return c?C.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0"},C.createElement(c,{color:n,strokeWidth:s})):null},vd=({defaultColor:e,rfId:t})=>n=>{const o=[];return n.edges.reduce((r,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=In(s,t);o.includes(a)||(r.push({id:a,color:s.color||e,...s}),o.push(a))}}),r),[]).sort((r,i)=>r.id.localeCompare(i.id))},es=({defaultColor:e,rfId:t})=>{const n=Q(N.useCallback(vd({defaultColor:e,rfId:t}),[e,t]),(o,r)=>!(o.length!==r.length||o.some((i,s)=>i.id!==r[s].id)));return C.createElement("defs",null,n.map(o=>C.createElement(wd,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};es.displayName="MarkerDefinitions";var bd=N.memo(es);const Sd=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),ts=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:i,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:l,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:p,onReconnectEnd:w,reconnectRadius:y,children:v,disableKeyboardA11y:g})=>{const{edgesFocusable:E,edgesUpdatable:A,elementsSelectable:x,width:k,height:T,connectionMode:V,nodeInternals:P,onError:I}=Q(Sd,ae),H=pd(t,P,n);return k?C.createElement(C.Fragment,null,H.map(({level:B,edges:O,isMaxLevel:R})=>C.createElement("svg",{key:B,style:{zIndex:B},width:k,height:T,className:"react-flow__edges react-flow__container"},R&&C.createElement(bd,{defaultColor:e,rfId:o}),C.createElement("g",null,O.map(h=>{const[_,b,M]=Vo(P.get(h.source)),[$,S,j]=Vo(P.get(h.target));if(!M||!j)return null;let D=h.type||"default";r[D]||(I?.("011",Ie.error011(D)),D="default");const z=r[D]||r.default,F=V===Ke.Strict?S.target:(S.target??[]).concat(S.source??[]),L=Ro(b.source,h.sourceHandle),Z=Ro(F,h.targetHandle),G=L?.position||X.Bottom,W=Z?.position||X.Top,q=!!(h.focusable||E&&typeof h.focusable>"u"),ee=h.reconnectable||h.updatable,K=typeof m<"u"&&(ee||A&&typeof ee>"u");if(!L||!Z)return I?.("008",Ie.error008(L,h)),null;const{sourceX:me,sourceY:de,targetX:pe,targetY:fe}=dd(_,L,G,$,Z,W);return C.createElement(z,{key:h.id,id:h.id,className:ce([h.className,i]),type:D,data:h.data,selected:!!h.selected,animated:!!h.animated,hidden:!!h.hidden,label:h.label,labelStyle:h.labelStyle,labelShowBg:h.labelShowBg,labelBgStyle:h.labelBgStyle,labelBgPadding:h.labelBgPadding,labelBgBorderRadius:h.labelBgBorderRadius,style:h.style,source:h.source,target:h.target,sourceHandleId:h.sourceHandle,targetHandleId:h.targetHandle,markerEnd:h.markerEnd,markerStart:h.markerStart,sourceX:me,sourceY:de,targetX:pe,targetY:fe,sourcePosition:G,targetPosition:W,elementsSelectable:x,onContextMenu:s,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:l,onEdgeDoubleClick:f,onReconnect:m,onReconnectStart:p,onReconnectEnd:w,reconnectRadius:y,rfId:o,ariaLabel:h.ariaLabel,isFocusable:q,isReconnectable:K,pathOptions:"pathOptions"in h?h.pathOptions:void 0,interactionWidth:h.interactionWidth,disableKeyboardA11y:g})})))),v):null};ts.displayName="EdgeRenderer";var Ed=N.memo(ts);const Nd=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function _d({children:e}){const t=Q(Nd);return C.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Cd(e){const t=Jn(),n=N.useRef(!1);N.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Ad={[X.Left]:X.Right,[X.Right]:X.Left,[X.Top]:X.Bottom,[X.Bottom]:X.Top},ns=({nodeId:e,handleType:t,style:n,type:o=ze.Bezier,CustomComponent:r,connectionStatus:i})=>{const{fromNode:s,handleId:a,toX:c,toY:u,connectionMode:l}=Q(N.useCallback(T=>({fromNode:T.nodeInternals.get(e),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[e]),ae),f=s?.[oe]?.handleBounds;let m=f?.[t];if(l===Ke.Loose&&(m=m||f?.[t==="source"?"target":"source"]),!s||!m)return null;const p=a?m.find(T=>T.id===a):m[0],w=p?p.x+p.width/2:(s.width??0)/2,y=p?p.y+p.height/2:s.height??0,v=(s.positionAbsolute?.x??0)+w,g=(s.positionAbsolute?.y??0)+y,E=p?.position,A=E?Ad[E]:null;if(!E||!A)return null;if(r)return C.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:s,fromHandle:p,fromX:v,fromY:g,toX:c,toY:u,fromPosition:E,toPosition:A,connectionStatus:i});let x="";const k={sourceX:v,sourceY:g,sourcePosition:E,targetX:c,targetY:u,targetPosition:A};return o===ze.Bezier?[x]=Ar(k):o===ze.Step?[x]=jn({...k,borderRadius:0}):o===ze.SmoothStep?[x]=jn(k):o===ze.SimpleBezier?[x]=Cr(k):x=`M${v},${g} ${c},${u}`,C.createElement("path",{d:x,fill:"none",className:"react-flow__connection-path",style:n})};ns.displayName="ConnectionLine";const Md=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function kd({containerStyle:e,style:t,type:n,component:o}){const{nodeId:r,handleType:i,nodesConnectable:s,width:a,height:c,connectionStatus:u}=Q(Md,ae);return!(r&&i&&a&&s)?null:C.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},C.createElement("g",{className:ce(["react-flow__connection",u])},C.createElement(ns,{nodeId:r,handleType:i,style:t,type:n,CustomComponent:o,connectionStatus:u})))}function Bo(e,t){return N.useRef(null),se(),N.useMemo(()=>t(e),[e])}const os=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:i,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:p,onSelectionContextMenu:w,onSelectionStart:y,onSelectionEnd:v,connectionLineType:g,connectionLineStyle:E,connectionLineComponent:A,connectionLineContainerStyle:x,selectionKeyCode:k,selectionOnDrag:T,selectionMode:V,multiSelectionKeyCode:P,panActivationKeyCode:I,zoomActivationKeyCode:H,deleteKeyCode:B,onlyRenderVisibleElements:O,elementsSelectable:R,selectNodesOnDrag:h,defaultViewport:_,translateExtent:b,minZoom:M,maxZoom:$,preventScrolling:S,defaultMarkerColor:j,zoomOnScroll:D,zoomOnPinch:z,panOnScroll:F,panOnScrollSpeed:L,panOnScrollMode:Z,zoomOnDoubleClick:G,panOnDrag:W,onPaneClick:q,onPaneMouseEnter:ee,onPaneMouseMove:K,onPaneMouseLeave:me,onPaneScroll:de,onPaneContextMenu:pe,onEdgeContextMenu:fe,onEdgeMouseEnter:re,onEdgeMouseMove:Ee,onEdgeMouseLeave:J,onReconnect:Y,onReconnectStart:le,onReconnectEnd:He,reconnectRadius:yt,noDragClassName:Je,noWheelClassName:Qe,noPanClassName:Me,elevateEdgesOnSelect:et,disableKeyboardA11y:Be,nodeOrigin:Oe,nodeExtent:tt,rfId:nt})=>{const xt=Bo(e,od),ie=Bo(t,ud);return Cd(i),C.createElement(td,{onPaneClick:q,onPaneMouseEnter:ee,onPaneMouseMove:K,onPaneMouseLeave:me,onPaneContextMenu:pe,onPaneScroll:de,deleteKeyCode:B,selectionKeyCode:k,selectionOnDrag:T,selectionMode:V,onSelectionStart:y,onSelectionEnd:v,multiSelectionKeyCode:P,panActivationKeyCode:I,zoomActivationKeyCode:H,elementsSelectable:R,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:D,zoomOnPinch:z,zoomOnDoubleClick:G,panOnScroll:F,panOnScrollSpeed:L,panOnScrollMode:Z,panOnDrag:W,defaultViewport:_,translateExtent:b,minZoom:M,maxZoom:$,onSelectionContextMenu:w,preventScrolling:S,noDragClassName:Je,noWheelClassName:Qe,noPanClassName:Me,disableKeyboardA11y:Be},C.createElement(_d,null,C.createElement(Ed,{edgeTypes:ie,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:O,onEdgeContextMenu:fe,onEdgeMouseEnter:re,onEdgeMouseMove:Ee,onEdgeMouseLeave:J,onReconnect:Y,onReconnectStart:le,onReconnectEnd:He,reconnectRadius:yt,defaultMarkerColor:j,noPanClassName:Me,elevateEdgesOnSelect:!!et,disableKeyboardA11y:Be,rfId:nt},C.createElement(kd,{style:E,type:g,component:A,containerStyle:x})),C.createElement("div",{className:"react-flow__edgelabel-renderer"}),C.createElement(id,{nodeTypes:xt,onNodeClick:s,onNodeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:f,onNodeMouseLeave:m,onNodeContextMenu:p,selectNodesOnDrag:h,onlyRenderVisibleElements:O,noPanClassName:Me,noDragClassName:Je,disableKeyboardA11y:Be,nodeOrigin:Oe,nodeExtent:tt,rfId:nt})))};os.displayName="GraphView";var Td=N.memo(os);const Pn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],De={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Pn,nodeExtent:Pn,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ke.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:ou,isValidConnection:void 0},jd=()=>$i((e,t)=>({...De,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:i}=t();e({nodeInternals:wn(n,o,r,i)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=t();e({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{const r=typeof n<"u",i=typeof o<"u",s=r?wn(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:i?o:[],hasDefaultNodes:r,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),l=c?.querySelector(".react-flow__viewport");if(!l)return;const f=window.getComputedStyle(l),{m22:m}=new window.DOMMatrixReadOnly(f.transform),p=n.reduce((y,v)=>{const g=r.get(v.id);if(g?.hidden)r.set(g.id,{...g,[oe]:{...g[oe],handleBounds:void 0}});else if(g){const E=Ln(v.nodeElement);!!(E.width&&E.height&&(g.width!==E.width||g.height!==E.height||v.forceUpdate))&&(r.set(g.id,{...g,[oe]:{...g[oe],handleBounds:{source:Do(".source",v.nodeElement,m,u),target:Do(".target",v.nodeElement,m,u)}},...E}),y.push({id:g.id,type:"dimensions",dimensions:E}))}return y},[]);Yr(r,u);const w=s||i&&!s&&Zr(t,{initial:!0,...a});e({nodeInternals:new Map(r),fitViewOnInitDone:w}),p?.length>0&&o?.(p)},updateNodePositions:(n,o=!0,r=!1)=>{const{triggerNodeChanges:i}=t(),s=n.map(a=>{const c={id:a.id,type:"position",dragging:r};return o&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});i(s)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:i,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:c}=t();if(n?.length){if(i){const u=Zu(n,a()),l=wn(u,r,s,c);e({nodeInternals:l})}o?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:i}=t();let s,a=null;o?s=n.map(c=>$e(c,!0)):(s=ct(i(),n),a=ct(r,[])),Ht({changedNodes:s,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:i}=t();let s,a=null;o?s=n.map(c=>$e(c,!0)):(s=ct(r,n),a=ct(i(),[])),Ht({changedNodes:a,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:i}=t(),s=n||i(),a=o||r,c=s.map(l=>(l.selected=!1,$e(l.id,!1))),u=a.map(l=>$e(l.id,!1));Ht({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=t();o?.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=t();o?.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=t(),i=o().filter(a=>a.selected).map(a=>$e(a.id,!1)),s=n.filter(a=>a.selected).map(a=>$e(a.id,!1));Ht({changedNodes:i,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:o}=t();o.forEach(r=>{r.positionAbsolute=Fn(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:r,height:i,d3Zoom:s,d3Selection:a,translateExtent:c}=t();if(!s||!a||!n.x&&!n.y)return!1;const u=Re.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),l=[[0,0],[r,i]],f=s?.constrain()(u,l,c);return s.transform(a,f),o[0]!==f.x||o[1]!==f.y||o[2]!==f.k},cancelConnection:()=>e({connectionNodeId:De.connectionNodeId,connectionHandleId:De.connectionHandleId,connectionHandleType:De.connectionHandleType,connectionStatus:De.connectionStatus,connectionStartHandle:De.connectionStartHandle,connectionEndHandle:De.connectionEndHandle}),reset:()=>e({...De})}),Object.is),rs=({children:e})=>{const t=N.useRef(null);return t.current||(t.current=jd()),C.createElement(Wl,{value:t.current},e)};rs.displayName="ReactFlowProvider";const ss=({children:e})=>N.useContext(cn)?C.createElement(C.Fragment,null,e):C.createElement(rs,null,e);ss.displayName="ReactFlowWrapper";const Id={input:Vr,default:$n,output:Br,group:Kn},Dd={default:Kt,straight:Un,step:Zn,smoothstep:ln,simplebezier:Yn},$d=[0,0],zd=[15,15],Pd={x:0,y:0,zoom:1},Rd={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},is=N.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i=Id,edgeTypes:s=Dd,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:l,onMoveStart:f,onMoveEnd:m,onConnect:p,onConnectStart:w,onConnectEnd:y,onClickConnectStart:v,onClickConnectEnd:g,onNodeMouseEnter:E,onNodeMouseMove:A,onNodeMouseLeave:x,onNodeContextMenu:k,onNodeDoubleClick:T,onNodeDragStart:V,onNodeDrag:P,onNodeDragStop:I,onNodesDelete:H,onEdgesDelete:B,onSelectionChange:O,onSelectionDragStart:R,onSelectionDrag:h,onSelectionDragStop:_,onSelectionContextMenu:b,onSelectionStart:M,onSelectionEnd:$,connectionMode:S=Ke.Strict,connectionLineType:j=ze.Bezier,connectionLineStyle:D,connectionLineComponent:z,connectionLineContainerStyle:F,deleteKeyCode:L="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:G=!1,selectionMode:W=Tt.Full,panActivationKeyCode:q="Space",multiSelectionKeyCode:ee=qt()?"Meta":"Control",zoomActivationKeyCode:K=qt()?"Meta":"Control",snapToGrid:me=!1,snapGrid:de=zd,onlyRenderVisibleElements:pe=!1,selectNodesOnDrag:fe=!0,nodesDraggable:re,nodesConnectable:Ee,nodesFocusable:J,nodeOrigin:Y=$d,edgesFocusable:le,edgesUpdatable:He,elementsSelectable:yt,defaultViewport:Je=Pd,minZoom:Qe=.5,maxZoom:Me=2,translateExtent:et=Pn,preventScrolling:Be=!0,nodeExtent:Oe,defaultMarkerColor:tt="#b1b1b7",zoomOnScroll:nt=!0,zoomOnPinch:xt=!0,panOnScroll:ie=!1,panOnScrollSpeed:Ne=.5,panOnScrollMode:Le=We.Free,zoomOnDoubleClick:Fe=!0,panOnDrag:ot=!0,onPaneClick:_e,onPaneMouseEnter:Xe,onPaneMouseMove:un,onPaneMouseLeave:dn,onPaneScroll:wt,onPaneContextMenu:fn,children:eo,onEdgeContextMenu:Ye,onEdgeDoubleClick:us,onEdgeMouseEnter:ds,onEdgeMouseMove:fs,onEdgeMouseLeave:hs,onEdgeUpdate:ms,onEdgeUpdateStart:ps,onEdgeUpdateEnd:gs,onReconnect:ys,onReconnectStart:xs,onReconnectEnd:ws,reconnectRadius:vs=10,edgeUpdaterRadius:bs=10,onNodesChange:Ss,onEdgesChange:Es,noDragClassName:Ns="nodrag",noWheelClassName:_s="nowheel",noPanClassName:to="nopan",fitView:Cs=!1,fitViewOptions:As,connectOnClick:Ms=!0,attributionPosition:ks,proOptions:Ts,defaultEdgeOptions:js,elevateNodesOnSelect:Is=!0,elevateEdgesOnSelect:Ds=!1,disableKeyboardA11y:no=!1,autoPanOnConnect:$s=!0,autoPanOnNodeDrag:zs=!0,connectionRadius:Ps=20,isValidConnection:Rs,onError:Vs,style:Hs,id:oo,nodeDragThreshold:Bs,...Os},Ls)=>{const hn=oo||"1";return C.createElement("div",{...Os,style:{...Hs,...Rd},ref:Ls,className:ce(["react-flow",r]),"data-testid":"rf__wrapper",id:oo},C.createElement(ss,null,C.createElement(Td,{onInit:u,onMove:l,onMoveStart:f,onMoveEnd:m,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:E,onNodeMouseMove:A,onNodeMouseLeave:x,onNodeContextMenu:k,onNodeDoubleClick:T,nodeTypes:i,edgeTypes:s,connectionLineType:j,connectionLineStyle:D,connectionLineComponent:z,connectionLineContainerStyle:F,selectionKeyCode:Z,selectionOnDrag:G,selectionMode:W,deleteKeyCode:L,multiSelectionKeyCode:ee,panActivationKeyCode:q,zoomActivationKeyCode:K,onlyRenderVisibleElements:pe,selectNodesOnDrag:fe,defaultViewport:Je,translateExtent:et,minZoom:Qe,maxZoom:Me,preventScrolling:Be,zoomOnScroll:nt,zoomOnPinch:xt,zoomOnDoubleClick:Fe,panOnScroll:ie,panOnScrollSpeed:Ne,panOnScrollMode:Le,panOnDrag:ot,onPaneClick:_e,onPaneMouseEnter:Xe,onPaneMouseMove:un,onPaneMouseLeave:dn,onPaneScroll:wt,onPaneContextMenu:fn,onSelectionContextMenu:b,onSelectionStart:M,onSelectionEnd:$,onEdgeContextMenu:Ye,onEdgeDoubleClick:us,onEdgeMouseEnter:ds,onEdgeMouseMove:fs,onEdgeMouseLeave:hs,onReconnect:ys??ms,onReconnectStart:xs??ps,onReconnectEnd:ws??gs,reconnectRadius:vs??bs,defaultMarkerColor:tt,noDragClassName:Ns,noWheelClassName:_s,noPanClassName:to,elevateEdgesOnSelect:Ds,rfId:hn,disableKeyboardA11y:no,nodeOrigin:Y,nodeExtent:Oe}),C.createElement(Cu,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:p,onConnectStart:w,onConnectEnd:y,onClickConnectStart:v,onClickConnectEnd:g,nodesDraggable:re,nodesConnectable:Ee,nodesFocusable:J,edgesFocusable:le,edgesUpdatable:He,elementsSelectable:yt,elevateNodesOnSelect:Is,minZoom:Qe,maxZoom:Me,nodeExtent:Oe,onNodesChange:Ss,onEdgesChange:Es,snapToGrid:me,snapGrid:de,connectionMode:S,translateExtent:et,connectOnClick:Ms,defaultEdgeOptions:js,fitView:Cs,fitViewOptions:As,onNodesDelete:H,onEdgesDelete:B,onNodeDragStart:V,onNodeDrag:P,onNodeDragStop:I,onSelectionDrag:h,onSelectionDragStart:R,onSelectionDragStop:_,noPanClassName:to,nodeOrigin:Y,rfId:hn,autoPanOnConnect:$s,autoPanOnNodeDrag:zs,onError:Vs,connectionRadius:Ps,isValidConnection:Rs,nodeDragThreshold:Bs}),C.createElement(Nu,{onSelectionChange:O}),eo,C.createElement(Kl,{proOptions:Ts,position:ks}),C.createElement(ju,{rfId:hn,disableKeyboardA11y:no})))});is.displayName="ReactFlow";function Vd(){return C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},C.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Hd(){return C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},C.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Bd(){return C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},C.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Od(){return C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},C.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Ld(){return C.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},C.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const At=({children:e,className:t,...n})=>C.createElement("button",{type:"button",className:ce(["react-flow__controls-button",t]),...n},e);At.displayName="ControlButton";const Fd=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),as=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:s,onFitView:a,onInteractiveChange:c,className:u,children:l,position:f="bottom-left"})=>{const m=se(),[p,w]=N.useState(!1),{isInteractive:y,minZoomReached:v,maxZoomReached:g}=Q(Fd,ae),{zoomIn:E,zoomOut:A,fitView:x}=Jn();if(N.useEffect(()=>{w(!0)},[]),!p)return null;const k=()=>{E(),i?.()},T=()=>{A(),s?.()},V=()=>{x(r),a?.()},P=()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c?.(!y)};return C.createElement(wr,{className:ce(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&C.createElement(C.Fragment,null,C.createElement(At,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:g},C.createElement(Vd,null)),C.createElement(At,{onClick:T,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},C.createElement(Hd,null))),n&&C.createElement(At,{className:"react-flow__controls-fitview",onClick:V,title:"fit view","aria-label":"fit view"},C.createElement(Bd,null)),o&&C.createElement(At,{className:"react-flow__controls-interactive",onClick:P,title:"toggle interactivity","aria-label":"toggle interactivity"},y?C.createElement(Ld,null):C.createElement(Od,null)),l)};as.displayName="Controls";var Xd=N.memo(as),be;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(be||(be={}));function Yd({color:e,dimensions:t,lineWidth:n}){return C.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Zd({color:e,radius:t}){return C.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Ud={[be.Dots]:"#91919a",[be.Lines]:"#eee",[be.Cross]:"#e2e2e2"},Gd={[be.Dots]:1,[be.Lines]:1,[be.Cross]:6},Wd=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function cs({id:e,variant:t=be.Dots,gap:n=20,size:o,lineWidth:r=1,offset:i=2,color:s,style:a,className:c}){const u=N.useRef(null),{transform:l,patternId:f}=Q(Wd,ae),m=s||Ud[t],p=o||Gd[t],w=t===be.Dots,y=t===be.Cross,v=Array.isArray(n)?n:[n,n],g=[v[0]*l[2]||1,v[1]*l[2]||1],E=p*l[2],A=y?[E,E]:g,x=w?[E/i,E/i]:[A[0]/i,A[1]/i];return C.createElement("svg",{className:ce(["react-flow__background",c]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},C.createElement("pattern",{id:f+e,x:l[0]%g[0],y:l[1]%g[1],width:g[0],height:g[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`},w?C.createElement(Zd,{color:m,radius:E/i}):C.createElement(Yd,{dimensions:A,color:m,lineWidth:r})),C.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}cs.displayName="Background";var qd=N.memo(cs);const ge="p-4 rounded-lg text-white font-semibold shadow-lg text-center whitespace-pre-line min-w-[300px]",Ot="p-4 rounded-lg text-white font-bold shadow-lg text-center whitespace-pre-line min-w-[300px] text-xl",Kd=[{id:"start",type:"default",data:{label:"System Diagnostics Entry Point"},position:{x:0,y:0},className:`${Ot} text-2xl bg-gradient-to-br from-blue-500 to-blue-600 border-2 border-blue-400`},{id:"power-check",type:"default",data:{label:"Power System Diagnostics"},position:{x:-400,y:150},className:`${Ot} bg-gradient-to-br from-purple-500 to-purple-600`},{id:"battery",type:"default",data:{label:`Battery Voltage Analysis
(Threshold: 12.2V DC)`},position:{x:-400,y:275},className:`${ge} bg-gradient-to-br from-purple-400 to-purple-500`},{id:"battery-system",type:"default",data:{label:`Battery System Diagnostics:
• Cell Balance Check
• Temperature Monitoring
• Charging Efficiency Test`},position:{x:-400,y:400},className:`${ge} bg-gradient-to-br from-purple-400 to-purple-500`},{id:"solar-system",type:"default",data:{label:`Solar Integration Check:
• Panel Performance
• Charge Controller Status
• Power Output Analysis`},position:{x:-400,y:550},className:`${ge} bg-gradient-to-br from-purple-400 to-purple-500`},{id:"charge",type:"default",data:{label:`Power System Recovery Protocol:
• Initialize Shore Power Connection
• Monitor Charging Parameters
• Verify Power Stability`},position:{x:-400,y:700},className:`${ge} bg-gradient-to-br from-purple-400 to-purple-500`},{id:"network",type:"default",data:{label:"Network Infrastructure Analysis"},position:{x:0,y:150},className:`${Ot} bg-gradient-to-br from-cyan-500 to-cyan-600`},{id:"wifi",type:"default",data:{label:`Signal Quality Metrics:
• RSSI Threshold: -70dBm
• SNR Threshold: 20dB
• Connection Stability Check`},position:{x:0,y:300},className:`${ge} bg-gradient-to-br from-cyan-400 to-cyan-500`},{id:"smart-devices",type:"default",data:{label:`Smart Device Connectivity:
• Device Discovery Scan
• Protocol Compatibility
• Connection Quality Test`},position:{x:0,y:450},className:`${ge} bg-gradient-to-br from-cyan-400 to-cyan-500`},{id:"boost",type:"default",data:{label:`Signal Enhancement Protocol:
• Deploy Signal Amplification
• Optimize Antenna Configuration
• Verify Signal Improvement`},position:{x:0,y:600},className:`${ge} bg-gradient-to-br from-cyan-400 to-cyan-500`},{id:"software",type:"default",data:{label:"System Software Verification"},position:{x:400,y:150},className:`${Ot} bg-gradient-to-br from-indigo-500 to-indigo-600`},{id:"version",type:"default",data:{label:`Firmware Version Analysis:
• Current Version: v2.1.4
• Latest Release: v2.1.4
• Compatibility Check`},position:{x:400,y:300},className:`${ge} bg-gradient-to-br from-indigo-400 to-indigo-500`},{id:"update",type:"default",data:{label:`System Update Protocol:
• Download Firmware Package
• Verify Digital Signatures
• Execute Update Sequence`},position:{x:400,y:450},className:`${ge} bg-gradient-to-br from-indigo-400 to-indigo-500`},{id:"resolved",type:"default",data:{label:`System Status Verification:
Diagnostic Completion Check`},position:{x:0,y:850},className:`${ge} bg-gradient-to-br from-emerald-500 to-emerald-600`},{id:"support",type:"default",data:{label:`Technical Support Escalation:
• Generate System Diagnostics
• Schedule Technical Consultation
• Prepare Support Documentation`},position:{x:0,y:950},className:`${ge} bg-gradient-to-br from-red-500 to-red-600`}],Jd=[{id:"start-power",source:"start",target:"power-check",label:"Power Analysis",labelBgPadding:[8,4],labelBgStyle:{fill:"#1e293b"},labelStyle:{fill:"#fff",fontSize:12},type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"start-network",source:"start",target:"network",label:"Network Subsystem",labelBgPadding:[8,4],labelBgStyle:{fill:"#1e293b"},labelStyle:{fill:"#fff",fontSize:12},type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"start-software",source:"start",target:"software",label:"Software Subsystem",labelBgPadding:[8,4],labelBgStyle:{fill:"#1e293b"},labelStyle:{fill:"#fff",fontSize:12},type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"power-battery",source:"power-check",target:"battery",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"battery-battery-system",source:"battery",target:"battery-system",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"battery-solar-system",source:"battery",target:"solar-system",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"battery-charge",source:"battery",target:"charge",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"network-wifi",source:"network",target:"wifi",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"wifi-smart-devices",source:"wifi",target:"smart-devices",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"smart-devices-boost",source:"smart-devices",target:"boost",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"software-version",source:"software",target:"version",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"version-update",source:"version",target:"update",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"battery-system-resolved",source:"battery-system",target:"resolved",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"solar-system-resolved",source:"solar-system",target:"resolved",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"charge-resolved",source:"charge",target:"resolved",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"boost-resolved",source:"boost",target:"resolved",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"update-resolved",source:"update",target:"resolved",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}},{id:"resolved-support",source:"resolved",target:"support",type:"smoothstep",markerEnd:{type:te.ArrowClosed},animated:!0,style:{stroke:"#6366f1"}}],Qd={hideAttribution:!0},ls=()=>d.jsxs(Xs,{className:"p-6 bg-gradient-to-br from-gray-900 to-gray-800 border-gray-700 rounded-[24px]",children:[d.jsx("h3",{className:"text-2xl font-semibold mb-6 text-white",children:"System Diagnostics Flowchart"}),d.jsx("p",{className:"text-gray-300 mb-6",children:"Interactive diagnostic flowchart for systematic troubleshooting of smart system integration issues."}),d.jsx("div",{className:"h-[800px] bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg border border-gray-700 shadow-xl overflow-hidden",children:d.jsxs(is,{nodes:Kd,edges:Jd,fitView:!0,className:"bg-[#080F1F]",minZoom:.4,maxZoom:1.5,defaultViewport:{x:400,y:0,zoom:.6},proOptions:Qd,children:[d.jsx(qd,{color:"#6366f1",gap:16,size:1}),d.jsx(Xd,{className:"bg-gray-800 border-gray-700 text-white flex flex-col",showInteractive:!1,position:"bottom-right"})]})})]}),ef=Object.freeze(Object.defineProperty({__proto__:null,default:ls},Symbol.toStringTag,{value:"Module"})),lf=()=>{N.useEffect(()=>{Ys(),mn(()=>Promise.resolve().then(()=>ci),void 0),mn(()=>import("./index-DYDVLK3v.js").then(n=>n.aN),__vite__mapDeps([0,1,2,3,4,5])),mn(()=>Promise.resolve().then(()=>ef),void 0),console.log("Troubleshooting page loaded")},[]);const e={initial:{opacity:0},in:{opacity:1},out:{opacity:0}},t={type:"tween",ease:"anticipate",duration:.5};return d.jsx(Zs,{children:d.jsxs(Ze.div,{initial:"initial",animate:"in",exit:"out",variants:e,transition:t,children:[d.jsxs("section",{className:"relative w-full h-[30vh] md:h-[40vh] min-h-[300px] flex items-center justify-center overflow-hidden",children:[d.jsx("img",{src:"/lovable-uploads/a6746652-04f0-4f89-a55d-b241e7bd972a.webp",alt:"Smart RV Interior",className:"absolute inset-0 w-full h-full object-cover",loading:"lazy"}),d.jsx("div",{className:"absolute inset-0 bg-black/70"}),d.jsxs(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"relative z-10 text-center px-4 md:px-6",children:[d.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white mb-4 md:mb-6 drop-shadow-lg",children:"Troubleshooting & Setup Guides"}),d.jsx("p",{className:"text-lg md:text-xl text-gray-100 max-w-2xl mx-auto drop-shadow-md",children:"Comprehensive guides and solutions for your Smart RV system"})]})]}),d.jsx("section",{className:"w-full bg-[#080F1F] py-8 md:py-12",children:d.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 space-y-8 md:space-y-12",children:[d.jsx(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:d.jsx(Fo,{})}),d.jsx(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:d.jsx(ls,{})}),d.jsx(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:d.jsx(Us,{})}),d.jsxs(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},children:[d.jsx(Gs,{title:"Expert Support & Emergency Services",subtitle:"Get professional help when you need it most with our trusted partners",partners:[{name:"Good Sam",url:"https://goodsam.com",title:"Good Sam Emergency Roadside",description:"Nation's most trusted RV roadside assistance with 24/7 emergency support and technical troubleshooting",features:["24/7 Emergency Support","Technical Phone Support","Nationwide Coverage","RV Specific Services"],buttonText:"Get Emergency Coverage"},{name:"RV Life",url:"https://rvlife.com",title:"RV Life System Monitoring",description:"Advanced monitoring systems that prevent problems before they happen with real-time diagnostics",features:["Real-Time Diagnostics","Preventive Alerts","Remote Monitoring","Expert Installation"],buttonText:"Shop Monitoring Systems"}],gridCols:"2"}),d.jsx("div",{className:"px-4",children:d.jsx(Ws,{className:"max-w-6xl mx-auto my-8"})})]}),d.jsx(Ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.5},className:"text-center pt-4 md:pt-8",children:d.jsx(Oo,{to:"/contact",children:d.jsxs(Lo,{variant:"outline",className:"bg-transparent border-[#5B9BD5] text-[#5B9BD5] hover:bg-[#5B9BD5]/20 hover:text-white hover:border-[#5B9BD5] transition-all duration-300",children:["Need More Help? Contact Support ",d.jsx(ni,{className:"w-4 h-4 ml-2"})]})})})]})})]})})};export{lf as default};
